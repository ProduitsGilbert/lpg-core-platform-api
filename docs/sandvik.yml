openapi: 3.0.0 # https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md
info:
  title: Machining Insights API
  version: "3.0.0"
  description: Machining Insights API
  contact:
    name: coromant product support
    url: https://www.sandvik.coromant.com/en-gb/support/coroplus-machining-insights-support
    email: coroplusvirtualsupport@sandvik.com

servers:
  - url: https://machininginsights.sandvik.coromant.com
    description: Production environment

security:
  - BearerAuth: []

tags:
  - name: Alerts
    description: APIs for Alerts
  - name: Auth
    description: APIs for Auth
  - name: Calendar
    description: APIs for Calendar
  - name: ConnectData
    description: APIs for ConnectData
  - name: Dashboards
    description: APIs for Dashboards
  - name: Decision Tree
    description: APIs for Decision Tree
  - name: Device Comments
    description: APIs for Device Comments
  - name: Device Registry
    description: APIs for Device Registry
  - name: Device Rules
    description: APIs for Device Rules
  - name: Enrich Input
    description: APIs for Enrich Input
  - name: Enrich Rules
    description: APIs for Enrich Rules
  - name: Knowledge Base
    description: APIs for KB
  - name: Licensing
    description: APIs for Licensing
  - name: Maintain
    description: APIs for Maintaining Plans and Activities
  - name: Media Manager
    description: APIs for Media Manager
  - name: Metrics
    description: APIs for Metrics
  - name: Operator Panels
    description: APIs for Operator Panels
  - name: Part-Operator-Mapping
    description: APIs for Part-Operator-Mapping
  - name: Plant
    description: APIs for Plant
  - name: Reports
    description: APIs for Reports
  - name: Target
    description: APIs for Targets
  - name: Ticketing
    description: APIs for Ticketing
  - name: TimeSeries
    description: APIs for TimeSeries

paths:
  #---- alerts ----
  /v3/alerts/alert:
    get:
      tags:
        - Alerts
      summary: Get alerts.
      x-permission: alert:use
      parameters:
        - $ref: "#/components/parameters/pageParam"
        - $ref: "#/components/parameters/sizeParam"
        - $ref: "#/components/parameters/sortParam"
        - $ref: "#/components/parameters/deviceOptParam"
        - $ref: "#/components/parameters/deviceTagOptParam"
        - $ref: "#/components/parameters/tagOptParam"
        - $ref: "#/components/parameters/startOptParam"
        - $ref: "#/components/parameters/endOptParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/alerts"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          description: Validation failed

  "/v3/alerts/alert/{id}":
    get:
      tags:
        - Alerts
      summary: Get alert for id.
      x-permissions: alert:use
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/alert"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          description: "{}"

  "/v3/alerts/alert/{id}/comment":
    get:
      tags:
        - Alerts
      summary: Get all the comments for an alert specified by the given id.
      x-permissions: alert:use
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/commentWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"
    post:
      tags:
        - Alerts
      summary: Create a comment for alert for given id.
      x-permissions: alert:use
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/commentPostBody"
      responses:
        "200":
          description: Success!
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/alerts/tag:
    get:
      tags:
        - Alerts
      summary: Get the list of tags for the plant.
      x-permissions: alert:use
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/tag"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          description: "[]"
    post:
      tags:
        - Alerts
      summary: Create an alert tag.
      x-permissions: alert:admin
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        description: The post request body
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/alertTag"
      responses:
        "200":
          $ref: "#/components/responses/alertTag"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  "/v3/alerts/tag/{id}":
    get:
      tags:
        - Alerts
      summary: Get the tag for specified id.
      x-permissions: alert:use
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/tag"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          description: "{}"

  /v3/alerts/tag/seed:
    post:
      tags:
        - Alerts
      summary: Seed tags.
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      description: Seed a list of tags for a plant
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: string
                example: Seeded default tags for a plant
        "304":
          $ref: "#/components/responses/NotModified"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/alerts/watcher-rule:
    get:
      tags:
        - Alerts
      summary: Get the list of watcher rules for a plant.
      x-permissions: alert:admin
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/alertWatcherRuleWithId"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"
    post:
      tags:
        - Alerts
      summary: Create a watcher rule for a plant.
      x-permissions: alert:admin
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        description: The post request body
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/alertWatcherRule"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/alertWatcherRuleWithId"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  "/v3/alerts/watcher-rule/{id}":
    put:
      tags:
        - Alerts
      summary: Update watcher rule for a given id.
      x-permissions: alert:admin
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        description: Watcher rule update body
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/alertWatcherRule"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/alertWatcherRuleWithId"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  /v3/alerts/apply-watcher-rules:
    post:
      tags:
        - Alerts
      summary: Apply watcher rules.
      x-permissions: alert:use
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        description: the request body
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/alertApplyWatcherRule"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    type:
                      type: string
                      enum:
                        - EMAIL
                    value:
                      type: string
                      example: email@email.com
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  /v1/alerts/mailgun-webhook:
    post:
      tags:
        - Alerts
      summary: Create a comment on a alert by replying to an email.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/emailMailgunBody"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    example: "123456"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"

  #---- auth ----
  /v1/auth/admin/permissions:
    get:
      tags:
        - Auth
      summary: Get permissions.
      x-permissions: permissions:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/authAdminPermission"

  /v1/auth/admin/plants:
    get:
      tags:
        - Auth
      summary: Get plants.
      x-permissions: plants:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/authAdminPlant"

  /v1/auth/admin/roles:
    get:
      tags:
        - Auth
      summary: Get roles.
      x-permissions: roles:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/authAdminRoleWithId"
    post:
      tags:
        - Auth
      summary: Create a new role.
      x-permissions: roles:create
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/authAdminRoleWithId"
      responses:
        "201":
          description: Success
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/authAdminRoleWithId"

  "/v1/auth/admin/roles/{id}":
    put:
      tags:
        - Auth
      summary: Update role.
      x-permissions: roles:update
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/authAdminRoleWithId"
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/authAdminRoleWithId"

  /v1/auth/admin/users:
    get:
      tags:
        - Auth
      summary: Get users.
      x-permissions: users:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/profileWithId"
    post:
      tags:
        - Auth
      summary: Create a new user.
      x-permissions: users:create
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/profileWithPassword"
      responses:
        "201":
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/profileWithId"

  "/v1/auth/admin/users/{id}":
    get:
      tags:
        - Auth
      summary: Get user for the given id.
      x-permissions: users:read
      security:
        - BearerAuth: []
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/profileWithId"
    put:
      tags:
        - Auth
      summary: Update the information for a user with the given id.
      x-permissions: users:update
      security:
        - BearerAuth: []
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/profileWithId"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/profileWithId"

  /v1/auth/profile:
    get:
      tags:
        - Auth
      summary: Get the profile.
      description: Get the profile of a user
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/profileWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    put:
      tags:
        - Auth
      summary: Update profile.
      description: Update the profile of a user
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/profile"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/profileWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/auth/provision/clients:
    get:
      tags:
        - Auth
      summary: Get clients.
      x-permissions: clients:read
      responses:
        "200":
          description: Cool
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/readClient"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"
    post:
      tags:
        - Auth
      summary: Create a client.
      x-permissions: clients:create
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/client"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/readClient"

  "/v1/auth/provision/clients/{id}":
    get:
      tags:
        - Auth
      summary: Get client for the specified id.
      x-permissions: clients:read
      parameters:
        - $ref: "#/components/parameters/idParam"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/readClient"
    delete:
      tags:
        - Auth
      summary: Delete a client with the given id.
      x-permissions: clients:delete
      parameters:
        - $ref: "#/components/parameters/idParam"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/readClient"

  /v1/auth/provision/permissions:
    get:
      tags:
        - Auth
      summary: Get permisssions.
      x-permissions: permissions:read:private,public
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/permissions"
    post:
      tags:
        - Auth
      summary: Create a permission.
      x-permissions: permissions:create,update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/permissions"
      responses:
        "204":
          description: ""

  /v1/auth/provision/tenants:
    get:
      tags:
        - Auth
      summary: Get tenants.
      x-permissions: tenants:read
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/readTenant"
    post:
      tags:
        - Auth
      summary: Create a tenant.
      x-permissions: tenants:create
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/tenant"
      responses:
        "201":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/readTenant"

  "/v1/auth/provision/tenants/{id}":
    get:
      tags:
        - Auth
      summary: Get tenants for the specified id.
      x-permissions: tenants:read
      parameters:
        - $ref: "#/components/parameters/idParam"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/readTenant"

  /v1/auth/provision/plants:
    get:
      tags:
        - Auth
      summary: Get list of all plants.
      x-permissions: tenants:read, plants:read
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/plantWithId"

  "/v1/auth/provision/plants/{tenant}":
    get:
      tags:
        - Auth
      summary: Get list of plants for the specified tenant.
      x-permissions: tenants:read, plants:read
      parameters:
        - $ref: "#/components/parameters/tenantParam"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/plantWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"
    post:
      tags:
        - Auth
      summary: Create a plant for the given tenant id.
      x-permissions: tenants:read, plants:create
      parameters:
        - $ref: "#/components/parameters/tenantParam"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/plantWithId"

  "/v1/auth/provision/plants/{tenant}/{id}":
    get:
      tags:
        - Auth
      summary: Get the plant for the specified tenant with the given id.
      x-permissions: tenants:read, plants:read
      parameters:
        - $ref: "#/components/parameters/tenantParam"
        - $ref: "#/components/parameters/idParam"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/plantWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"

  "/v1/auth/provision/plants/_/{plantName}":
    get:
      tags:
        - Auth
      summary: Get plant for the the specified plant.
      x-permissions: tenants:read, plants:read
      parameters:
        - $ref: "#/components/parameters/plantNameParam"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/plantWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"

  "/v1/auth/provision/roles/{tenant}":
    put:
      tags:
        - Auth
      summary: Update roles for a tenant.
      x-permissions: roles:upsert
      parameters:
        - $ref: "#/components/parameters/tenantParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/authAdminRole"
      responses:
        "204":
          description: Success
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/auth/oauth/token:
    post:
      tags:
        - Auth
      summary: Fetch the token.
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: "#/components/schemas/userForm"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/tokenResponse"

  /v1/auth/oauth/validate:
    get:
      tags:
        - Auth
      summary: Validate JWT token.
      responses:
        "204":
          description: Ok
        "401":
          $ref: "#/components/responses/Unauthorized"

  #---- calendar ----
  /v3/calendar/timezone:
    get:
      tags:
        - Calendar
      summary: Get timezone for a plant.
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/timezone"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NoTimezone"
        "500":
          $ref: "#/components/responses/ServerError"
    put:
      tags:
        - Calendar
      summary: Create or update timezone for a plant.
      x-permissions: calendar:edit
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/timezone"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/timezone"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        "500":
          $ref: "#/components/responses/ServerError"
    delete:
      tags:
        - Calendar
      summary: Delete timezone for a plant.
      x-permissions: calendar:edit
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "204":
          description: No Content
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NoTimezone"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/time/current:
    get:
      tags:
        - Calendar
      summary: Get the current time at the Plant based on the given timestamp (defaults to now).
      parameters:
        - $ref: "#/components/parameters/timestampOptParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
                format: date-time
                example: "2021-09-28T01:05:09.076-05:00"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NoCalendar"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/time/sliding:
    get:
      tags:
        - Calendar
      summary: Get a sliding interval based on the given timestamp (defaults to now).
      parameters:
        - $ref: "#/components/parameters/timestampOptParam"
        - $ref: "#/components/parameters/durationParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/interval"
        "400":
          $ref: "#/components/responses/NoDuration"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NoCalendar"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/time/tumbling:
    get:
      tags:
        - Calendar
      summary: Get a tumbling interval based on the given timestamp (defaults to now).
      parameters:
        - $ref: "#/components/parameters/timestampOptParam"
        - $ref: "#/components/parameters/durationParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/interval"
        "400":
          $ref: "#/components/responses/NoDuration"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NoCalendar"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/shift/current:
    get:
      tags:
        - Calendar
      summary: Get the current shift at a particular timestamp (defaults to now).
      parameters:
        - $ref: "#/components/parameters/timestampOptParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/shift"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NoCalendar"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/workday/interval:
    get:
      tags:
        - Calendar
      summary: Get the interval for a list of workdays and devices.
      parameters:
        - $ref: "#/components/parameters/workdayParam"
        - $ref: "#/components/parameters/deviceOptParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/device-interval"
                  - $ref: "#/components/schemas/interval"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NoCalendar"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/workday/current:
    get:
      tags:
        - Calendar
      summary: Get the current workday at a particular timestamp (defaults to now).
      parameters:
        - $ref: "#/components/parameters/timestampOptParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/workday"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NoCalendar"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/event:
    get:
      tags:
        - Calendar
      summary: Get the singleton calendar events for a given plant.
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/calendar-events"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    post:
      tags:
        - Calendar
      summary: Create a singleton calendar event for a plant.
      x-permissions: calendar:create
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/calendar-event-post"
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/calendar-event-get"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  "/v3/calendar/event/{id}":
    get:
      tags:
        - Calendar
      summary: Get the singleton calendar events for a given id.
      parameters:
        - in: path
          required: true
          name: id
          schema:
            type: string
            example: 5b5971e4459dc1bfb7e71409
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/calendar-event-get"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NoSuchCalendarEvent"
        "500":
          $ref: "#/components/responses/ServerError"
    put:
      tags:
        - Calendar
      summary: Update a specific calendar event by id.
      x-permissions: calendar:edit
      parameters:
        - in: path
          required: true
          name: id
          schema:
            type: string
            example: 5b5971e4459dc1bfb7e71409
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/calendar-event-post"
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/calendar-event-get"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    delete:
      tags:
        - Calendar
      summary: Delete a specific calendar event by id.
      x-permissions: calendar:edit
      parameters:
        - in: path
          required: true
          name: id
          schema:
            type: string
            example: 5b5971e4459dc1bfb7e71409
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "204":
          description: No Content
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NoSuchCalendarEvent"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/schedule:
    get:
      tags:
        - Calendar
      summary: Get the schedules for a given plant.
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/calendar-schedules"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    post:
      tags:
        - Calendar
      summary: Create a schedule for a plant.
      x-permissions: calendar:edit
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/calendar-schedule-post"
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/calendar-schedule-get"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  "/v3/calendar/schedule/{id}":
    get:
      tags:
        - Calendar
      summary: Get the schedule for a given id.
      parameters:
        - in: path
          required: true
          name: id
          schema:
            type: string
            example: 5b5971e4459dc1bfb7e71409
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/calendar-schedule-get"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NoSuchSchedule"
        "500":
          $ref: "#/components/responses/ServerError"
    put:
      tags:
        - Calendar
      summary: Update a specific schedule by id.
      x-permissions: calendar:edit
      parameters:
        - in: path
          required: true
          name: id
          schema:
            type: string
            example: 5b5971e4459dc1bfb7e71409
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/calendar-schedule-post"
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/calendar-schedule-get"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    delete:
      tags:
        - Calendar
      summary: Delete a specific schedule by id.
      x-permissions: calendar:edit
      parameters:
        - in: path
          required: true
          name: id
          schema:
            type: string
            example: 5b5971e4459dc1bfb7e71409
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "204":
          description: No Content
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NoSuchSchedule"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/calendar:
    get:
      tags:
        - Calendar
      summary: Get the calendar for a given plant.
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/calendar-calendar"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/current/time:
    get:
      tags:
        - Calendar
      summary: Endpoint to get the current time at the Plant based on the given timestamp (defaults to now).
      x-permissions: calendar:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/timestampOptParam"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
                example: "2018-07-26T05:33:40.897Z"
        "400":
          $ref: "#/components/responses/NoPlant"
        "404":
          $ref: "#/components/responses/NoCalendar"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/current/sliding:
    get:
      tags:
        - Calendar
      summary: Endpoint to get a sliding interval based on the given timestamp (defaults to now).
      x-permissions: calendar:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/timestampOptParam"
        - $ref: "#/components/parameters/durationParam"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/interval"
        "400":
          $ref: "#/components/responses/NoPlant"
        "404":
          $ref: "#/components/responses/NoCalendar"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/current/tumbling:
    get:
      tags:
        - Calendar
      summary: Endpoint to get a tumbling interval based on the given timestamp (defaults to now).
      x-permissions: calendar:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/timestampOptParam"
        - $ref: "#/components/parameters/durationParam"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/interval"
        "400":
          $ref: "#/components/responses/NoPlant"
        "404":
          $ref: "#/components/responses/NoCalendar"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/current/shift:
    get:
      tags:
        - Calendar
      summary: Internal endpoint to get the current shift at a particular timestamp (defaults to now).
      x-permissions: calendar:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/timestampOptParam"
        - $ref: "#/components/parameters/deviceParam"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/shift"
        "400":
          $ref: "#/components/responses/NoPlant"
        "404":
          $ref: "#/components/responses/NoCalendar"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/current/workday:
    get:
      tags:
        - Calendar
      summary: Endpoint to get the current workday at a particular timestamp (defaults to now).
      x-permissions: calendar:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/timestampOptParam"
        - $ref: "#/components/parameters/deviceParam"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/workday"
        "400":
          $ref: "#/components/responses/NoPlant"
        "404":
          $ref: "#/components/responses/NoCalendar"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/current/interval:
    get:
      tags:
        - Calendar
      summary: Endpoint to get the current interval for the specified period at a given timestamp.
      x-permissions: calendar:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/timestampOptParam"
        - $ref: "#/components/parameters/deviceOptParam"
        - $ref: "#/components/parameters/periodOptParam"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/calendar-interval"
        "400":
          $ref: "#/components/responses/NoPlant"
        "404":
          $ref: "#/components/responses/NoCalendar"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/holidays:
    get:
      tags:
        - Calendar
      summary: Internal endpoint to get the singleton calendar events for a given plant.
      x-permissions: calendar:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/calendar-holiday-enrich"
        "400":
          $ref: "#/components/responses/NoPlant"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/calendar/schedules:
    get:
      tags:
        - Calendar
      summary: Endpoint to get the schedule for a given plant.
      x-permissions: calendar:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/deviceOptParam"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/calendar-schedule-enrich"
        "400":
          $ref: "#/components/responses/NoPlant"
        "500":
          $ref: "#/components/responses/ServerError"

  #---- comments
  /v1/comments/comment:
    post:
      tags:
        - Device Comments
      summary: Get comments for a list of devices.
      x-permissions: comment:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/device-comment-request-body"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/device-comments"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          description: Not found
        "500":
          #          description: Error fetching comments
          $ref: "#/components/responses/ErrorWithMessageInBody"

  /v1/comments/comment/create:
    post:
      tags:
        - Device Comments
      summary: Post a comment for a device.
      x-permissions: comment:create
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/device-comment"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/device-comment"
        "400":
          #          description: Comment should be unique
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          #          description: Error saving comment
          $ref: "#/components/responses/ErrorWithMessageInBody"

  #---- connectdata ---
  /v1/connectdata/mtcdata:
    get:
      tags:
        - ConnectData
      x-permissions: reports:read
      parameters:
        - $ref: "#/components/parameters/authorizationParam"
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/device_uuidParam"
        - $ref: "#/components/parameters/containingParam"
        - $ref: "#/components/parameters/dataItemTypeOptParam"
        - $ref: "#/components/parameters/subTypeOptParam"
        - $ref: "#/components/parameters/dataItemNameOptParam"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/connectdata-mtcdata-res"
        "400":
          description: Failed to find tenant
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Insufficient Permissions
        "500":
          description: Failed to fetch data

  /v1/connectdata/connectdata:
    get:
      tags:
        - ConnectData
      x-permissions: reports:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/device_uuidParam"
        - $ref: "#/components/parameters/containingParam"
        - $ref: "#/components/parameters/dataItemNamesParam"
        - $ref: "#/components/parameters/nameParam"
        - $ref: "#/components/parameters/timezoneParam"
        - $ref: "#/components/parameters/plantParam"
        - $ref: "#/components/parameters/authorizationParam"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/connectdata-connectdata-res"
        "400":
          description: Failed to find tenant
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Insufficient Permissions
        "500":
          description: Failed to fetch data

  /v1/connectdata:
    get:
      tags:
        - ConnectData
      summary: Get the aggregated sample values if more than 2000 hits or raw sample values.
      x-permissions: reports:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/deviceParam"
        - $ref: "#/components/parameters/startParam"
        - $ref: "#/components/parameters/endParam"
        - $ref: "#/components/parameters/dataItemNameCamelParam"
        - $ref: "#/components/parameters/binSizeParam"
        - $ref: "#/components/parameters/statsParam"
        - $ref: "#/components/parameters/categoryParam"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/connectdata-res"
        "400":
          description: Failed to find tenant
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Insufficient Permissions
        "500":
          description: Failed to fetch data

  /v1/connectdata/download:
    get:
      tags:
        - ConnectData
      summary: Download data from GCS
      x-permissions: jobs:read
      parameters:
        - $ref: "#/components/parameters/authorizationParam"
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/deviceParam"
        - $ref: "#/components/parameters/dateParam"
        - $ref: "#/components/parameters/dataTypeParam"
        - $ref: "#/components/parameters/createdAtParam"
      responses:
        "200":
          description: OK
          content:
            application/zip:
              schema:
                $ref: "#/components/schemas/connectdata-download-res"
            text/html:
              schema:
                $ref: "#/components/schemas/no-data-present"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/no-device'
                  - $ref: '#/components/schemas/invalid-datatype'
                  - $ref: '#/components/schemas/invalid-date'
                  - $ref: '#/components/schemas/invalid-created-at'
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Insufficient Permissions
        "500":
          description: Internal Server Error
        #---- enrich-input ----
  /v3/enrich-input:
    post:
      tags:
        - Enrich Input
      summary: Send user events to enrich (classifications, counts, part kinds, part instances, etc.
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/enrichInput"
      responses:
        "202":
          description: Accepted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/enrichInputResponse"
        "400":
          $ref: "#/components/responses/NoTenant"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  #---- enrich-rules ----
  /v1/enrich-rules/rules:
    get:
      tags:
        - Enrich Rules
      summary: Returns the rules DSL for the plant specified in X-Tenant.
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  plant:
                    type: string
                    example: death_star
                  ruleConfig:
                    type: string
                    example: Devices.xml from ... Tenant...Plant...
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    post:
      tags:
        - Enrich Rules
      summary: Updates enrich rules DSL for a plant.
      x-permissions: rules:admin
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/enrichRulesDSLInput"
      responses:
        "200":
          description: ""
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
        "500":
          $ref: "#/components/responses/ServerError"
  /v1/enrich-rules/rule:
    post:
      tags:
        - Enrich Rules
      summary: Provides ability to post a device rule
      x-permissions: rules:admin
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/enrichRulesDSLInput"
      responses:
        "200":
          description: No content
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/enrich-rules/default-rule:
    get:
      tags:
        - Enrich Rules
      summary: Returns the default rule (JS) for the plant specified in X-Tenant.
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"

      responses:
        "200":
          description: OK
          content:
            text/html; charset=utf-8:
              schema:
                $ref: "#/components/schemas/enrichDeviceRulesJSResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          description: Not found
        "500":
          $ref: "#/components/responses/ServerError"

    put:
      tags:
        - Enrich Rules
      summary: Create/Update the default rule (JS) for the plant specified in X-Tenant.
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/enrichRulesJSInput"

      responses:
        "200":
          description: OK
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          description: Not found
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/enrich-rules/generated-rule:
    get:
      tags:
        - Enrich Rules
      summary: Returns the generated rules (JS) for the plant specified in X-Tenant.
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            text/html; charset=utf-8:
              schema:
                type: string
                example: use strict; var _rxjs = require("rxjs")...
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    post:
      tags:
        - Enrich Rules
      summary: Updates enrich rules JS for a plant.
      x-permissions: rules:admin
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/enrichRulesJSInput"
      responses:
        "200":
          description: ""
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
        "500":
          $ref: "#/components/responses/ServerError"

  "/v1/enrich-rules/generated-rule/{device}":
    get:
      tags:
        - Enrich Rules
      summary: Returns the generated rules (JS) for device within the plant specified in X-Tenant.
      parameters:
        - in: path
          name: device
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"

      responses:
        "200":
          description: OK
          content:
            text/html; charset=utf-8:
              schema:
                $ref: "#/components/schemas/enrichDeviceRulesJSResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          description: Not found
        "500":
          $ref: "#/components/responses/ServerError"
    post:
      tags:
        - Enrich Rules
      summary: Updates enrich rules JS for a device.
      x-permissions: rules:admin
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - in: path
          name: device
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/enrichDeviceRuleJSInput"
      responses:
        "200":
          description: ""
          content:
            text/html; charset=utf-8:
              schema:
                $ref: "#/components/schemas/enrichDeviceRulesJSPostResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
        "500":
          $ref: "#/components/responses/ServerError"
  /v1/enrich-rules/recently-updated:
    get:
      tags:
        - Enrich Rules
      summary: Returns the rules updated after the updated at parameter, across all plants
      x-permissions: plants:access:*
      parameters:
        - $ref: "#/components/parameters/updatedAt"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/enrichRulesRecentlyUpdatedRulesResponse"

        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  #---- knowledge-base ----
  /v3/knowledge-base/work-instructions:
    get:
      tags:
        - Knowledge Base
      summary: Get work instructions.
      description: knowledgebase:access
      parameters:
        - $ref: "#/components/parameters/deviceOptParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/workInstructionWithPageCount"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          #          description: Failed to fetch work instructions
          $ref: "#/components/responses/ErrorWithMessageInBody"

  /v3/knowledge-base/work-instruction:
    post:
      tags:
        - Knowledge Base
      summary: Create work instruction.
      description: knowledgebase:create
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        description: Work Instruction body
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/workInstruction"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/workInstructionWithId"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          #          description: Failed to create work instruction
          $ref: "#/components/responses/ErrorWithMessageInBody"

  "/v3/knowledge-base/work-instruction/{id}":
    get:
      tags:
        - Knowledge Base
      summary: Get work instructions for id.
      description: knowledgebase:access
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/workInstructionWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          #          description: Failed to fetch work instruction
          $ref: "#/components/responses/ErrorWithMessageInBody"
    put:
      tags:
        - Knowledge Base
      summary: Update work instructions for id.
      description: knowledgebase:edit
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/workInstruction"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/workInstructionWithId"
        "400":
          #          description: Work instruction not found
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          #          description: Failed to update work instruction
          $ref: "#/components/responses/ServerError"
    delete:
      tags:
        - Knowledge Base
      summary: Delete work instructions for id.
      description: knowledgebase:edit
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "204":
          description: ""
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          #          description: Failed to delete work instruction
          $ref: "#/components/responses/ErrorWithMessageInBody"

  "/v3/knowledge-base/work-instruction/{workInstructionId}/page/{id}":
    get:
      tags:
        - Knowledge Base
      summary: Get page for id.
      description: Get page for id  in work instruction for given work instruction id
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/workInstructionIdParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/workInstructionPageWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          #          description: Document not found
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          #          description: Failed to fetch work instruction
          $ref: "#/components/responses/ErrorWithMessageInBody"

  #--- media manager ---
  /v3/media-manager/upload:
    post:
      tags:
        - Media Manager
      summary: Uploads a file.
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                media:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/media"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          description: Not found

  /v3/media-manager/assets:
    get:
      tags:
        - Media Manager
      summary: Get all the assets meta data
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/assetType"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/assetMetaData"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          description: Not found

  "/v3/media-manager/asset/{assetId}":
    get:
      tags:
        - Media Manager
      summary: Get a particular asset with ID
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/assetId"
      responses:
        "200":
          description: ""
          headers:
            content-length:
              schema:
                type: number
                example: 11234
            content-type:
              schema:
                type: string
                example: "image/png"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          description: Not found

  "/v3/media-manager/media":
    get:
      tags:
        - Media Manager
      summary: Get all media
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/assetType"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/media"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          description: Not found

  "/v3/media-manager/media/{assetId}":
    get:
      tags:
        - Media Manager
      summary: Get a particular media with ID
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/assetId"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/media"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          description: Not found
    delete:
      tags:
        - Media Manager
      summary: Delete media
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/assetId"
      responses:
        "204":
          description: ""
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          description: Not found


  #--- licensing ---
  "/v3/licensing/branding/{plantName}":
    get:
      tags:
        - Licensing
      summary: Get branding information for the provided plant.
      parameters:
        - in: path
          name: plantName
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                example:
                  themeName: coromant
        "401":
          $ref: "#/components/responses/Unauthorized"

  /v3/licensing/accessRight:
    get:
      tags:
        - Licensing
      summary: Get available access rights.
      x-permissions: accessRight:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      security:
        - BearerAuth: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/accessRight"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"

  "/v3/licensing/accessRight/{name}":
    get:
      tags:
        - Licensing
      summary: Get access right with a specific name.
      parameters:
        - in: path
          name: name
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/accessRight"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          description: Not found
    put:
      tags:
        - Licensing
      summary: To create a new access right/update an existing access right.
      x-permissions: accessRight:create, accessRight:update
      parameters:
        - in: path
          name: name
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/accessRightRequestBody"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/accessRight"
        "400":
          $ref: "#/components/responses/ErrorWithNameAndMessage"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
    delete:
      tags:
        - Licensing
      summary: To delete an existing access right.
      x-permissions: accessRight:delete
      parameters:
        - in: path
          name: name
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/accessRight"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          description: Not found

  /v3/licensing/plant:
    get:
      tags:
        - Licensing
      summary: To get licenses for all plants.
      x-permissions: plant:readall
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/plantLicense"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"

  "/v3/licensing/plant/{name}":
    get:
      tags:
        - Licensing
      summary: To get licensing for a particular plant.
      parameters:
        - in: path
          name: name
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/plantLicense"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
    put:
      tags:
        - Licensing
      summary: To update the licensing for a particular plant.
      x-permissions: plant:create, plant:update
      parameters:
        - in: path
          name: name
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/plantLicenseRequestBody"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/plantLicense"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/ErrorWithNameAndMessage"
    delete:
      tags:
        - Licensing
      summary: To delete licensing for a plant.
      x-permissions: plant:delete
      parameters:
        - in: path
          name: name
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "201":
          description: OK
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          description: Not found

  /v3/licensing/partner:
    get:
      tags:
        - Licensing
      summary: To get list of partners.
      x-permissions: partner:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/partner"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"

  "/v3/licensing/partner/{partnerName}":
    get:
      tags:
        - Licensing
      summary: To get information for a specific partner.
      x-permissions: partner:read
      parameters:
        - in: path
          name: partnerName
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/partner"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          description: Not found
    put:
      tags:
        - Licensing
      summary: To create a new partner/update an existing partner.
      x-permissions: partner:create, partner:update
      parameters:
        - in: path
          name: partnerName
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/partnerRequestBody"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/partner"
        "400":
          $ref: "#/components/responses/ErrorWithNameAndMessage"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
    delete:
      tags:
        - Licensing
      summary: To delete information for a specified partner.
      x-permissions: partner:delete
      parameters:
        - in: path
          name: partnerName
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/deletePartner"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          description: Not found

  #---- plant ----
  /v1/plant/device:
    get:
      tags:
        - Plant
      summary: Get device information.
      x-permissions: device:read
      parameters:
        - $ref: "#/components/parameters/deviceUuidOptParam"
        - $ref: "#/components/parameters/xTenantHeader"
        - in: query
          name: withDataItems
          required: false
          schema:
            description: If false, data_items is empty array. If true, data_items is
              contains the list of data_items for the device.
            type: boolean
            example: true
            enum:
              - true
              - false
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/device"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ErrorWithErrorAndMessage"
    post:
      tags:
        - Plant
      summary: Create a new device.
      x-permissions: device:create, device:update
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/device-post"
      responses:
        "200":
          $ref: "#/components/responses/postDevice"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ErrorWithErrorAndMessage"

  "/v1/plant/device/{device}":
    put:
      tags:
        - Plant
      summary: Update the information for an existing device.
      x-permissions: device:update
      parameters:
        - in: path
          name: device
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/device"
      responses:
        "202":
          $ref: "#/components/responses/Accepted"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/plant/device/tags:
    get:
      tags:
        - Plant
      summary: Get the device tags for a plant.
      x-permissions: device:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/device-tags"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ErrorWithErrorAndMessage"

  "/v1/plant/device/{device}/probe":
    get:
      tags:
        - Plant
      summary: Get the probe for a device.
      x-permissions: device:read
      parameters:
        - in: path
          name: device
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/device-probe"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/plant/device/migrate-all:
    put:
      tags:
        - Plant
      summary: Migrate the existing devices.
      x-permissions: device:update
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                type: string
              example: []
      responses:
        "202":
          description: ""
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"


  /v1/plant/plant-state-activities:
    get:
      tags:
        - Plant
      summary: Get the list of the state*activity tuples for a plant.
      x-permissions: state_activities:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/plant-state-activities"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    put:
      tags:
        - Plant
      summary: Create a new state*activity/edit an existing state*activity.
      x-permissions: state_activities:update
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/plant-state-activities"
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/plant-state-activities"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/plant/data-items:
    get:
      tags:
        - Plant
      summary: Get the list of the state*activity tuples for a plant.
      x-permissions: device:read
      parameters:
        - $ref: "#/components/parameters/deviceUuidSingleParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/perfParameters"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/plant/rule-docs:
    get:
      deprecated: true
      tags:
        - Plant
      summary: Get the enrich rule document for a plant.
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
                format: enrules
                example: Devices.xml from...Tenant...Plant...
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    post:
      deprecated: true
      tags:
        - Plant
      summary: Update the enrich rules for a plant.
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                ruleDoc:
                  type: string
                  format: enrules
                  example: Devices.xml from...Tenant...Plant...
      responses:
        "201":
          $ref: "#/components/responses/Created"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/plant/rule-docs-versions:
    get:
      tags:
        - Plant
      summary: Get the timestamps corresponding to enrich rule document updates (deprecated).
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: integer
                  format: millis
                  example: 1444978595139
                example:
                  - 1444978595139
                  - 1444978595139
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/plant/hierarchy:
    get:
      tags:
        - Plant
      summary: Get hierarchy information.
      x-permissions: device:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/hierarchy"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"
    post:
      tags:
        - Plant
      summary: Post hierarchy information.
      x-permissions: device:update
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                devices:
                  type: array
                  items:
                    $ref: '#/components/schemas/hierarchy_devices'
      responses:
        "200":
          description: OK
          content:
            application/test:
              schema:
                type: string
                example: "Successfully posted hierarchy"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  "/v1/plant/hierarchy/path/{device}":
    get:
      tags:
        - Plant
      summary: Get path in hierarchy for a device uuid
      x-permissions: device:read
      parameters:
        - in: path
          name: device
          required: true
          schema:
            type: string
            example: "d1"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: string
                example: "p1.d1"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  #--- ticketing ----
  /v1/ticketing/ticket:
    get:
      tags:
        - Ticketing
      summary: Get gickets.
      x-permissions: ticketing:use
      parameters:
        - $ref: "#/components/parameters/deviceUuidsOptParam"
        - $ref: "#/components/parameters/overlappingDelimSemiOptParam"
        - $ref: "#/components/parameters/tagForDeviceGroupOptParam"
        - $ref: "#/components/parameters/typesOptParam"
        - $ref: "#/components/parameters/pageParam"
        - $ref: "#/components/parameters/sizeParam"
        - $ref: "#/components/parameters/sortParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/tickets"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    post:
      tags:
        - Ticketing
      summary: Create ticket.
      x-permissions: ticketing:use
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ticketCreateBody"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                   type: string
                   example: "1066"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  "/v1/ticketing/ticket/{id}":
    get:
      tags:
        - Ticketing
      summary: Get ticket for id.
      x-permissions: ticketing:use
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ticket"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    put:
      tags:
        - Ticketing
      summary: Update ticket for a given id.
      x-permissions: ticketing:use
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ticketUpdateBody"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ticket"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  "/v1/ticketing/ticket/{id}/comment":
    get:
      tags:
        - Ticketing
      summary: Get all the comments for a ticket with the given id.
      x-permissions: ticketing:use
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/commentWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    post:
      tags:
        - Ticketing
      summary: Create a comment for ticket for given id.
      x-permissions: ticketing:use
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/commentPostBody"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/commentWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  "/v1/ticketing/ticket/{ticketId}/comment/{commentId}":
    put:
      tags:
        - Ticketing
      summary: Edit a comment with an Id for a ticket with an ID.
      x-permissions: ticketing:use
      parameters:
        - $ref: "#/components/parameters/ticketIdParam"
        - $ref: "#/components/parameters/commentIdParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/editCommentBody"
      responses:
        "200":
          description: Success!
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"
    delete:
      tags:
        - Ticketing
      summary: Delete a comment with an Id for a ticket with an ID.
      x-permissions: ticketing:use
      parameters:
        - $ref: "#/components/parameters/ticketIdParam"
        - $ref: "#/components/parameters/commentIdParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"


  /v1/ticketing/ticket-type:
    get:
      tags:
        - Ticketing
      summary: Get the list of ticket types for the plant.
      x-permissions: ticketing:use
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ticketTypeWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    post:
      tags:
        - Ticketing
      summary: Create ticket type for a plant.
      x-permissions: ticketing:admin
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ticketType"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                   type: string
                   example: 61519cdc0757b
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  "/v1/ticketing/ticket-type/{id}":
    put:
      tags:
        - Ticketing
      summary: Update ticket type for the given id.
      x-permissions: ticketing:admin
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ticketType"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ticketTypeWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/ticketing/filter-ticket-types:
    post:
      tags:
        - Ticketing
      summary: Filter ticket types based on the specified parameters.
      x-permissions: ticketing:use
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ticketTypeFilterBody"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                  example: typeId
        "304":
          $ref: "#/components/responses/NotModified"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/ticketing/watcher-rule:
    get:
      tags:
        - Ticketing
      summary: Get the list of watcher rules for a plant.
      x-permissions: ticketing:admin
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ticketWatcherRuleWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    post:
      tags:
        - Ticketing
      summary: Create watcher rule.
      x-permissions: ticketing:admin
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        description: The post request body
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ticketWatcherRule"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ticketWatcherRuleWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  "/v1/ticketing/watcher-rule/{id}":
    put:
      tags:
        - Ticketing
      summary: Update watcher rule for the given id.
      x-permissions: ticketing:admin
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        description: Watcher rule update body
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ticketWatcherRule"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ticketWatcherRuleWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/ticketing/apply-watcher-rules:
    post:
      tags:
        - Ticketing
      summary: Apply watcher rules.
      x-permissions: ticketing:use
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        description: the request body
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ticketApplyWatcherRule"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    type:
                      type: string
                      enum:
                        - EMAIL
                    value:
                      type: string
                      example: email@email.com
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/ticketing/mailgun-webhook:
    post:
      tags:
        - Ticketing
      summary: Create a comment on a ticket by replying to an email.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/emailMailgunBody"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/commentWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/ServerError"


  #---- timeseries-metrics ---
  /v3/timeseries-metrics:
    post:
      tags:
        - Metrics
      summary: Get aggregated metrics.
      x-permissions: reports:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              anyOf:
                - $ref: "#/components/schemas/metricsInput"
                - $ref: "#/components/schemas/singleValueMetricsInput"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                example:
                  by_device:
                    - by_workday:
                        - key: 2017-08-11
                          value: 10
                        - key: 2017-08-12
                          value: 14
                      key: device-1
                    - by_workday:
                        - key: 2017-08-11
                          value: 12
                      key: device-2
        "400":
          #          description: Invalid request
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          #          description: Failed to fetch data
          $ref: "#/components/responses/ErrorWithMessageInBody"

  /v3/timeseries-metrics/flattened:
    post:
      tags:
        - Metrics
      summary: Get aggregated multiple metrics.
      description: reports:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              anyOf:
                - $ref: "#/components/schemas/flattenedMetricsInput"
                - $ref: "#/components/schemas/singleValueMetricsInput"
      responses:
        "200":
          $ref: "#/components/responses/FlattenedMetricOutput"
        "400":
          #          description: Invalid request
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          #          description: Failed to fetch data
          $ref: "#/components/responses/ErrorWithMessageInBody"

  #---- timeseries ----
  /v3/timeseries/timeline:
    get:
      tags:
        - TimeSeries
      summary: Legacy Get timelines for a device.
      x-permissions: reports:read
      parameters:
        - $ref: "#/components/parameters/deviceParam"
        - $ref: "#/components/parameters/startParam"
        - $ref: "#/components/parameters/endParam"
        - $ref: "#/components/parameters/nativeCodeOptParam"
        - $ref: "#/components/parameters/timelineParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/timeline"
        "400":
          $ref: "#/components/responses/InvalidRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "500":
          $ref: "#/components/responses/FailedToGetTimeline"

  "/v3/timeseries/timeline/raw":
    post:
      tags:
        - TimeSeries
      summary: Get timelines for a device.
      x-permissions: reports:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/rawTimelineRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/rawTimeline"
        "400":
          $ref: "#/components/responses/InvalidRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "500":
          $ref: "#/components/responses/FailedToGetTimeline"

  /v3/timeseries/timeline/schema:
    get:
      tags:
        - TimeSeries
      summary: Get timelines schema for a plant.
      x-permissions: reports:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/timelineSchema"
        "403":
          $ref: "#/components/responses/Forbidden"
        "500":
          $ref: "#/components/responses/FailedToGetTimelineSchema"

  /v3/timeseries/timeline/latest:
    post:
      tags:
        - TimeSeries
      summary: Get the latest document for selected devices in a plant.
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/timelineLatestInput"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/timelineLatestSchema"
        "400":
          $ref: "#/components/responses/InvalidRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
        "500":
          $ref: "#/components/responses/FailedToGetTimelineLatest"

  #--- target ----
  /v3/target/target:
    post:
      summary: Create a target. Targets for duration metrics should be in ms and targets for percentage metrics should be on a scale of 0-1.
      x-permissions: target:create
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      tags:
        - Target
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/target"
      responses:
        "200":
          description: Target created successfully
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  "/v3/target/target/{id}":
    put:
      summary: Update a target.
      x-permissions: target:update
      tags:
        - Target
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/target"
      responses:
        "200":
          description: Target updated successfully
        "400":
          #          description: "Cannot UPDATE target: {targetBody}"
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    delete:
      summary: Delete a target.
      x-permissions: target:delete
      tags:
        - Target
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Target deleted successfully
        "400":
          description: "Cannot DELETE target for plant: plant"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/target/search:
    post:
      summary: Search for targets based on given input.
      x-permissions: target:read
      tags:
        - Target
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/searchTargets"
      responses:
        "200":
          description: Succcess
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/target"
        "400":
          description: Error while fetching targets
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"


  #---- decision-tree ----
  /v3/decision-tree/nodes:
    get:
      tags:
        - Decision Tree
      summary: Get root nodes (starting points of all decision trees)
      description: decisiontree:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/node"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  /v3/decision-tree/node:
    post:
      summary: Create a node. A group of nodes in hierarchical order form a decision tree. The root node has "null" parent.
      x-permissions: decisiontree:create
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      tags:
        - Decision Tree
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/node"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/nodeWithId"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  "/v3/decision-tree/node/{id}":
    get:
      tags:
        - Decision Tree
      summary: Get the node and/or with immediate children or complete tree.
      x-permissions: decisiontree:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - in: query
          name: withImmediateChildren
          required: false
          schema:
            description: If true, the returned node contains the immediate children (if any).
            type: boolean
            example: true
            enum:
              - true
              - false
        - in: query
          name: withAllChildren
          required: false
          schema:
            description: If true, the returned node contains all the children in a hierarchical tree structure.
            type: boolean
            example: true
            enum:
              - true
              - false
        - in: path
          name: id
          required: true
          schema:
            type: string
            example: "abcdef"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/nodeWithId"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    put:
      summary: Update a node
      x-permissions: decisiontree:edit
      tags:
        - Decision Tree
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/node"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/nodeWithId"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    patch:
      summary: Partial update a node
      x-permissions: decisiontree:edit
      tags:
        - Decision Tree
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/node"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/nodeWithId"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    delete:
      summary: Delete a node.
      x-permissions: decisiontree:edit
      tags:
        - Decision Tree
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "204":
          description: No Content
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  #---- ui-config ----
  /v3/ui-config/dashboards:
    get:
      tags:
        - Dashboards
      summary: Get all dashboards.
      x-permissions: dashboards:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dashboards"
        "400":
          $ref: "#/components/responses/NoDashboard"
        "500":
          $ref: "#/components/responses/FailedToFetchDashboards"

  "/v3/ui-config/dashboards/{id}":
    get:
      tags:
        - Dashboards
      summary: Get a specific dashboard.
      x-permissions: dashboards:view
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dashboard"
        "400":
          $ref: "#/components/responses/NoDashboard"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"
    put:
      tags:
        - Dashboards
      summary: Create dashboard.
      x-permissions: dashboards:edit
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/dashboardBody"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dashboard"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"
    post:
      tags:
        - Dashboards
      summary: Update dashboard.
      x-permissions: dashboards:edit
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/dashboardBody"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dashboard"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"
    delete:
      tags:
        - Dashboards
      summary: Delete dashboard.
      x-permissions: dashboards:edit
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                example:
                  deleted: true
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  /v3/ui-config/dashboards-seed:
    put:
      tags:
        - Dashboards
      summary: Seed dashboards.
      x-permissions: dashboards:edit
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dashboards"
        "304":
          $ref: "#/components/responses/DashboardAlreadySeeded"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  /v3/ui-config/dashboards-seed-update:
    put:
      tags:
        - Dashboards
      summary: Update seeded dashboards.
      x-permissions: dashboards:edit
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/dashboards"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dashboards"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  /v3/ui-config/default-dashboards:
    get:
      tags:
        - Dashboards
      summary: Get default dashboards.
      x-permissions: dashboards:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dashboards"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/NoDefaultDashboard"

  /v3/ui-config/dashboards/tags:
    get:
      tags:
        - Dashboards
      summary: Get tags for dashboards.
      x-permissions: dashboards:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/dashboardTags"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  /v3/ui-config/operator-panels:
    get:
      tags:
        - Operator Panels
      summary: Get all operator panels.
      x-permissions: operators:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/operatorPanels"
        "400":
          $ref: "#/components/responses/NoOperatorPanel"
        "500":
          $ref: "#/components/responses/FailedToFetchOperatorPanels"

  "/v3/ui-config/operator-panels/{id}":
    get:
      tags:
        - Operator Panels
      summary: Get a specific operator panel.
      x-permissions: operators:view
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/operatorPanel"
        "400":
          $ref: "#/components/responses/NoOperatorPanel"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"
    put:
      tags:
        - Operator Panels
      summary: Create an operator panel.
      x-permissions: operators:edit
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/operatorPanelBody"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/operatorPanel"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"
    post:
      tags:
        - Operator Panels
      summary: Update an operator panel.
      x-permissions: operators:edit
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/operatorPanelBody"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/operatorPanel"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"
    delete:
      tags:
        - Operator Panels
      summary: Delete an operator panel.
      x-permissions: operators:edit
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                example:
                  deleted: true
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  /v3/ui-config/default-operator-panels:
    get:
      tags:
        - Operator Panels
      summary: Get default operator panels.
      x-permissions: operators:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/operatorPanels"
        "400":
          $ref: "#/components/responses/NoDefaultOperatorPanel"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  /v3/ui-config/operator-panels-seed:
    put:
      tags:
        - Operator Panels
      summary: Seed Operator Panels.
      x-permissions: operators:edit
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/operatorPanels"
        "304":
          $ref: "#/components/responses/OperatorPanelAlreadySeeded"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  /v3/ui-config/operator-panels-seed-update:
    put:
      tags:
        - Operator Panels
      summary: Update Seeded Operator Panels.
      x-permissions: operators:edit
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/operatorPanels"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/operatorPanels"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  /v3/ui-config/reports:
    get:
      tags:
        - Reports
      summary: Get all reports.
      x-permissions: reports:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/reports"
        "400":
          $ref: "#/components/responses/NoReport"
        "500":
          $ref: "#/components/responses/FailedToFetchReports"

  "/v3/ui-config/reports/{id}":
    get:
      tags:
        - Reports
      summary: Get a specific report.
      x-permissions: reports:view
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/report"
        "400":
          $ref: "#/components/responses/NoReport"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"
    put:
      tags:
        - Reports
      summary: Create a report.
      x-permissions: reports:edit
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/reportBody"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/report"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"
    post:
      tags:
        - Reports
      summary: Update a report.
      x-permissions: reports:edit
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/dashboardBody"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/report"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"
    delete:
      tags:
        - Reports
      summary: Delete a report.
      x-permissions: reports:edit
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                example:
                  deleted: true
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  /v3/ui-config/default-reports:
    get:
      tags:
        - Reports
      summary: Get default reports.
      x-permissions: reports:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/reports"
        "400":
          $ref: "#/components/responses/NoDefaultReport"
        "500":
          $ref: "#/components/responses/FailedToFetchReports"

  /v3/ui-config/reports-seed:
    put:
      tags:
        - Reports
      summary: Seed Reports.
      x-permissions: reports:edit
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/reports"
        "304":
          $ref: "#/components/responses/ReportAlreadySeeded"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  /v3/ui-config/reports-seed-update:
    put:
      tags:
        - Reports
      summary: Update Seeded Reports.
      x-permissions: reports:edit
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/reports"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/reports"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "500":
          $ref: "#/components/responses/ErrorWithMessageInBody"

  #---- device-registry ----
  /v3/device-registry/devices:
    post:
      tags:
        - Device Registry
      summary: Get devices
      x-permission: device:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/postDeviceRegistry"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/deviceRegistryEntry"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/device-registry/devices/{id}:
    put:
      tags:
        - Device Registry
      summary: Create / update device
      x-permission: device:update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/putDeviceRegistry"
      parameters:
        - $ref: "#/components/parameters/idParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/deviceRegistryEntry"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  #---- part-operator-mapping ----
  /v3/part-operator-mapping/value-mapping:
    post:
      tags:
        - Part-Operator-Mapping
      summary: Post value mappings to feed to enrich.
      x-permission: NA
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/valueMappingSchema"
      responses:
        "202":
          description: ""
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          description: Validation failed
    get:
      tags:
        - Part-Operator-Mapping
      summary: get value mappings for a given device and type.
      x-permission: NA
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - in: query
          name: device
          required: true
          schema:
            description: Device ID for which the value mappinge
            type: string
        - in: query
          name: type
          required: true
          schema:
            description: Type of the value mapping requested for a device
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/valueMappingResultsSchema"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          description: Validation failed

  #--- device-rules ---
  #--- Rule model ---
  /v3/device-rules/rule/js/{ruleName}:
    put:
      tags:
        - Device Rules
      summary: Create / update a js rule
      x-permission: rules:update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/putRuleRequest"
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/ruleNameParam"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ruleEntry"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

    delete:
      tags:
        - Device Rules
      summary: Delete a js rule
      x-permission: rules:delete
      parameters:
        - $ref: "#/components/parameters/ruleNameParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Successfully deleted
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          description: Resource not found
        "500":
          $ref: "#/components/responses/ServerError"

    get:
      tags:
        - Device Rules
      summary: Get a js rule
      x-permission: rules:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/ruleNameParam"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ruleEntry"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/device-rules/rule/js:
    get:
      tags:
        - Device Rules
      summary: Get all js rules
      x-permission: rules:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ruleEntries"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  # --- Ruleset model ---
  /v3/device-rules/ruleset/{rulesetName}:
    put:
      tags:
        - Device Rules
      summary: Create / update ruleset
      x-permission: rules:update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/putRulesetRequest"
      parameters:
        - $ref: "#/components/parameters/rulesetNameParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/rulesetEntry"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

    delete:
      tags:
        - Device Rules
      summary: Delete ruleset
      x-permission: rules:delete
      parameters:
        - $ref: "#/components/parameters/rulesetNameParam"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Successfully deleted
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "404":
          description: Resource not found
        "500":
          $ref: "#/components/responses/ServerError"

    get:
      tags:
        - Device Rules
      summary: Get ruleset
      x-permission: rules:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/rulesetNameParam"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/rulesetEntry"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/device-rules/ruleset:
    get:
      tags:
        - Device Rules
      summary: Get all rulesets
      x-permission: rules:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/rulesetEntries"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  # --- Default ruleset model ---
  /v3/device-rules/ruleset/default:
    put:
      tags:
        - Device Rules
      summary: Create / update default ruleset
      x-permission: rules:update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/putRulesetRequest"
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/defaultRulesetEntry"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

    get:
      tags:
        - Device Rules
      summary: Get default ruleset
      x-permission: rules:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/defaultRulesetEntry"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  # --- Device model ---
  /v3/device-rules/device/js/{device}:
    get:
      tags:
        - Device Rules
      summary: Get js rules for device
      x-permission: rules:read
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/devicePathParam"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/deviceJsRules"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/device-rules/device:
    put:
      tags:
        - Device Rules
      summary: Associate devices to ruleset
      x-permission: rules:update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/putDeviceRequest"
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/deviceEntries"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v3/device-rules/device/{device}/{rulesetName}:
    put:
      tags:
        - Device Rules
      summary: Associate device to ruleset
      x-permission: rules:update
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/devicePathParam"
        - $ref: "#/components/parameters/rulesetNameParam"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/deviceEntry"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/task/{taskSystem}:
    put:
      tags:
        - Maintain
      summary: Create Tasks in Task System
      x-permission: "tasksystem:permission"
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/taskSystem"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/taskCreationRequest"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    taskID:
                      $ref: "#/components/schemas/taskID"
                    status:
                      $ref: "#/components/schemas/status"
        "207":
          description: Multi-Status Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  taskID:
                    $ref: "#/components/schemas/taskID"
                  status:
                    $ref: "#/components/schemas/status"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/task/{taskSystem}/state:
    get:
      tags:
        - Maintain
      summary: Get Task State from Task System
      x-permission: ticketing:use
      parameters:
        - $ref: "#/components/parameters/taskIDs"
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/taskSystem"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/status"
                  state:
                    $ref: "#/components/schemas/state"
                  taskID:
                    $ref: "#/components/schemas/taskID"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/activity/state:
    post:
      tags:
        - Maintain
      summary: Update Activity State
      x-permission: maintain:activity:*
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                activityID:
                  $ref: "#/components/schemas/activityID"
                state:
                  $ref: "#/components/schemas/state"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: object
                example: {}
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/activities/closed-activities-time:
    get:
      tags:
        - Maintain
      summary: Query for time at which Activities were closed
      x-permission: maintain:activity:*
      parameters:
        - $ref: "#/components/parameters/assetIDs"
        - $ref: "#/components/parameters/planID"
        - $ref: "#/components/parameters/from"
        - $ref: "#/components/parameters/to"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: object
                properties:
                  assetID:
                    type: object
                    properties:
                      initialTime:
                        type: string
                        description: time of plan creation or last closed activity
                        format: date-time
                        example: "2021-06-02T12:06:42.662Z"
                      inRangeTime:
                        type: array
                        description: time of closed activities between a time range
                        items:
                          type: string
                          format: date-time
                        example: ["2021-06-03T12:06:42.662Z",  "2021-06-04T12:06:42.662Z"]
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/activity/closed:
    get:
      tags:
        - Maintain
      summary: Query for Last Closed Activity
      x-permission: maintain:activity:*
      parameters:
        - $ref: "#/components/parameters/assetID"
        - $ref: "#/components/parameters/planID"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/activity"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/activities/component-usage:
    get:
      tags:
        - Maintain
      summary: Query for predicted/pending activities for component usage
      x-permission: maintain:activity:*
      parameters:
        - $ref: "#/components/parameters/assetIDs"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: object
                properties:
                  activityID:
                    $ref: "#/components/schemas/activityID"
                  planID:
                    $ref: "#/components/schemas/planID"
                  planName:
                    $ref: "#/components/schemas/planName"
                  assetID:
                    $ref: "#/components/schemas/assetID"
                  planCreatedAt:
                    $ref: "#/components/schemas/createdAt"
                  currentValues:
                    $ref: "#/components/schemas/currentValues/items/properties/currentValue"
                  threshold:
                    $ref: "#/components/schemas/threshold/properties/gte"
                  activityState:
                    $ref: "#/components/schemas/state"
                  expectedAt:
                    $ref: "#/components/schemas/expectedAt"
                  pendingAt:
                    $ref: "#/components/schemas/pendingAt"
                  lastActivityClosedDate:
                    $ref: "#/components/schemas/completedAt"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/activities/open:
    get:
      tags:
        - Maintain
      summary: Query for all open activities
      x-permission: maintain:activity:*,plants:access:*
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/size"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: object
                properties:
                  activities:
                    $ref: "#/components/schemas/activities"
                  totalActivities:
                    type: number
                    example: 100
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/predicted:
    put:
      tags:
        - Maintain
      summary: Create Predicted Activity
      x-permission: maintain:activity:*
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                planID:
                  $ref: "#/components/schemas/planID"
                assetID:
                  $ref: "#/components/schemas/assetID"
                currentValues:
                  $ref: "#/components/schemas/currentValues"
                evaluatedTs:
                  $ref: "#/components/schemas/evaluatedTs"
                expectedAt:
                  $ref: "#/components/schemas/expectedAt"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: object
                properties:
                  activityID:
                    $ref: "#/components/schemas/activityID"
                  state:
                    $ref: "#/components/schemas/state"
                  operation:
                    type: string
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/pending:
    put:
      tags:
        - Maintain
      summary: Create Pending Activity
      x-permission: maintain:activity:*
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                planID:
                  $ref: "#/components/schemas/planID"
                assetID:
                  $ref: "#/components/schemas/assetID"
                currentValues:
                  $ref: "#/components/schemas/currentValues"
                evaluatedTs:
                  $ref: "#/components/schemas/evaluatedTs"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: object
                properties:
                  activityID:
                    $ref: "#/components/schemas/activityID"
                  state:
                    $ref: "#/components/schemas/state"
                  created:
                    type: boolean
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/plan:
    get:
      tags:
        - Maintain
      summary: Query Plans By Namespace
      x-permission: maintain:plan:*
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/plans"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    put:
      tags:
        - Maintain
      summary: Create Plan
      x-permission: maintain:plan:*
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                planType:
                  type: string
                namespace:
                  $ref: "#/components/schemas/namespace"
                assetIDs:
                  $ref: "#/components/schemas/assetIDs"
                taskSystem:
                  $ref: "#/components/schemas/taskSystem"
                taskDefinitions:
                  $ref: "#/components/schemas/taskDefinitions"
                conditions:
                  $ref: "#/components/schemas/conditions"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    $ref: "#/components/schemas/planID"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/plan/{id}:
    get:
      tags:
        - Maintain
      summary: Query Plans By ID
      x-permission: maintain:plan:*
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - in: path
          name: id
          description: Plan ID
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: object
                properties:
                  _id:
                    type: string
                  name:
                    type: string
                  planType:
                    type: string
                  taskSystem:
                    $ref: "#/components/schemas/taskSystem"
                  assetIDs:
                    $ref: "#/components/schemas/assetIDs"
                  taskDefintions:
                    $ref: "#/components/schemas/taskDefinitions"
                  conditions:
                    $ref: "#/components/schemas/conditions"
                  createdAt:
                    $ref: "#/components/schemas/createdAt"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/plans:
    get:
      tags:
        - Maintain
      summary: Query All Plans
      x-permission: maintain:plan:*,plants:access:*
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/size"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: object
                properties:
                  totalPlans:
                    type: number
                  plans:
                    $ref: "#/components/schemas/plans"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/predict/use-based/date:
    get:
      tags:
        - Maintain
      summary: Predict the activity creation date for use based condition
      x-permission: maintain:predict,reports:read
      parameters:
        - $ref: "#/components/parameters/assetIDs"
        - $ref: "#/components/parameters/threshold"
        - $ref: "#/components/parameters/from"
        - $ref: "#/components/parameters/to"
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    assetID:
                      $ref: "#/components/schemas/assetID"
                    expectedAt:
                      type: string
              examples:
                Example with predictions:
                  value:
                    - assetID: "device-1"
                      expectedAt: "2021-06-02T00:00:00.000Z"
                    - assetID: "device-2"
                      expectedAt: "2027-06-02T00:00:00.000Z"
                Example with no predictions:
                  value: []
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/filterset:
    get:
      tags:
        - Maintain
      summary: Query for all Filtersets
      x-permission: maintain:plan:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/filtersets"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    put:
      tags:
        - Maintain
      summary: Add Filterset
      x-permission: maintain:plan:view
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/filtersetPUTModel"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/filtersets"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/filterset/{id}:
    delete:
      tags:
        - Maintain
      summary: Delete Filterset by ID
      x-permission: maintain:plan:*
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - in: path
          name: id
          description: filterset ID
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Deleted
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/email/digest/subscription/{id}:
    get:
      tags:
        - Maintain
      summary: Query for Subscription by ID
      x-permission: maintain:activities:*
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
        - in: path
          name: id
          description: subscription ID
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/subscriptions"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

  /v1/maintain/email/digest/subscriptions:
    get:
      tags:
        - Maintain
      summary: Query for all Subscriptions
      x-permission: maintain:activities:*
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/subscriptions"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"
    put:
      tags:
        - Maintain
      summary: Save all Subscriptions
      x-permission: maintain:activities:*
      parameters:
        - $ref: "#/components/parameters/xTenantHeader"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                subscriptions:
                  $ref: "#/components/schemas/subscriptionPUTModel"
      responses:
        "200":
          description: Success!
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/subscriptions"
        "400":
          $ref: "#/components/responses/ErrorWithMessageInBody"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/InsufficientPerms"
        "500":
          $ref: "#/components/responses/ServerError"

components:
  schemas:
    calendar-interval:
      type: object
      properties:
        period:
          type: string
          example: PT1H
        interval:
          $ref: "#/components/schemas/interval"

    device-interval:
      type: object
      properties:
        device:
          type: string
          example: device1
        interval:
          $ref: "#/components/schemas/interval"

    calendar-calendar:
      type: object
      properties:
        timezone:
          $ref: "#/components/schemas/timezone"
        events:
          $ref: "#/components/schemas/calendar-events"
        schedules:
          $ref: "#/components/schemas/calendar-schedules"

    calendar-schedules:
      type: array
      items:
        $ref: "#/components/schemas/calendar-schedule-get"

    calendar-schedule-get:
      type: object
      properties:
        id:
          type: string
          example: 5b517b1cda10f175469e0076
        name:
          type: string
          example: Schedule 1
        workdayOffset:
          type: integer
          example: -3600000
          format: millis
        interval:
          $ref: "#/components/schemas/interval"
        agendas:
          $ref: "#/components/schemas/agendas"
        plant:
          type: string
          example: demo
        createdAt:
          type: string
          format: iso8601
          example: 2018-07-26T07:01:56.612Z
        updatedAt:
          type: string
          format: iso8601
          example: 2018-07-26T07:01:56.612Z

    calendar-schedule-post:
      type: object
      properties:
        name:
          type: string
          example: Schedule 1
        workdayOffset:
          type: integer
          example: -3600000
          format: millis
        interval:
          $ref: "#/components/schemas/interval"
        agendas:
          $ref: "#/components/schemas/agendas-without-id"

    agendas-without-id:
      type: array
      items:
        type: object
        properties:
          devices:
            type: array
            items:
              type: string
              example: demo_01
          eventConfigs:
            type: array
            items:
              type: object
              properties:
                occursWeekly:
                  type: array
                  items:
                    type: string
                    enum:
                      - MONDAY
                      - TUESDAY
                      - WEDNESDAY
                      - THURSDAY
                      - FRIDAY
                      - SATURDAY
                      - SUNDAY
                  example:
                    - MONDAY
                    - WEDNESDAY
                    - SUNDAY
                type:
                  type: string
                  example: Shift
                from:
                  $ref: "#/components/schemas/hour-min"
                to:
                  $ref: "#/components/schemas/hour-min"
                payload:
                  $ref: "#/components/schemas/payload"

    agendas:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
            example: 5b517a6a459dc1213de71405
          devices:
            type: array
            items:
              type: string
              example: demo_01
          eventConfigs:
            type: array
            items:
              type: object
              properties:
                id:
                  type: string
                  example: 5b517a6a459dc1753ee71408
                occursWeekly:
                  type: array
                  items:
                    type: string
                    enum:
                      - MONDAY
                      - TUESDAY
                      - WEDNESDAY
                      - THURSDAY
                      - FRIDAY
                      - SATURDAY
                      - SUNDAY
                  example:
                    - MONDAY
                    - WEDNESDAY
                    - SUNDAY
                type:
                  type: string
                  example: Shift
                from:
                  $ref: "#/components/schemas/hour-min"
                to:
                  $ref: "#/components/schemas/hour-min"
                payload:
                  $ref: "#/components/schemas/payload"

    hour-min:
      type: string
      pattern: ^(?:([01]\d|2[0-3]):([0-5]\d))$
      example: "13:59"

    calendar-holiday-enrich:
      type: array
      items:
        type: object
        properties:
          start:
            type: string
            format: iso8601
            example: 1970-01-02T05:30
          end:
            type: string
            format: iso8601
            example: 1970-01-02T06:30
          device:
            type: array
            items:
              type: string
              example: demo_01
          name:
            type: string
            example: Christmas
          plant:
            type: string
            example: demo
          timezone:
            type: string
            example: Asia/Kolkata

    calendar-schedule-enrich:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
            example: 5b5971e4459dc1bfb7e71409
          name:
            type: string
            example: Christmas
          plant:
            type: string
            example: demo
          timezone:
            type: string
            example: Asia/Kolkata
          workdayOffset:
            type: integer
            example: -3600000
            format: millis
          validityStart:
            type: integer
            example: 1532593585906
            format: millis
          validityEnd:
            type: integer
            example: 1532597185906
            format: millis
          scheduleEventConfig:
            type: array
            items:
              type: object
              properties:
                id:
                  type: string
                  example: 5b517a6a459dc1753ee71408
                name:
                  type: string
                  example: Shift 1
                type:
                  type: string
                  example: shifts
                  enum:
                    - shifts
                    - classification
                from:
                  $ref: "#/components/schemas/hour-min"
                to:
                  $ref: "#/components/schemas/hour-min"
                device:
                  type: array
                  items:
                    type: string
                    example: demo_01
                occursWeekly:
                  type: array
                  items:
                    type: string
                    enum:
                      - MONDAY
                      - TUESDAY
                      - WEDNESDAY
                      - THURSDAY
                      - FRIDAY
                      - SATURDAY
                      - SUNDAY
                  example:
                    - MONDAY
                    - WEDNESDAY
                    - SUNDAY

    calendar-events:
      type: array
      items:
        $ref: "#/components/schemas/calendar-event-get"

    calendar-event-post:
      type: object
      properties:
        device:
          type: array
          items:
            type: string
            example: demo_01
        type:
          type: string
          example: Holiday
        payload:
          $ref: "#/components/schemas/payload"
        interval:
          $ref: "#/components/schemas/interval"
      required:
        - type
        - payload
        - interval

    calendar-event-get:
      type: object
      properties:
        id:
          type: string
          example: 5b5971e4459dc1bfb7e71409
        device:
          type: array
          items:
            type: string
            example: demo_01
        type:
          type: string
          example: Holiday
        payload:
          $ref: "#/components/schemas/payload"
        interval:
          $ref: "#/components/schemas/interval"
        plant:
          type: string
          example: demo
        createdAt:
          type: string
          format: iso8601
          example: "2018-07-26T07:01:56.612Z"
        updatedAt:
          type: string
          format: iso8601
          example: "2018-07-26T07:01:56.612Z"

    workday:
      type: object
      properties:
        id:
          type: string
          example: 2018-07-26
        interval:
          $ref: "#/components/schemas/interval"
        events:
          type: array
          items:
            $ref: "#/components/schemas/shift"

    shift:
      type: object
      properties:
        sourceId:
          type: string
          example: 5b517a6a459dc1f869e71406
        type:
          type: string
          enum:
            - Shift
        payload:
          $ref: "#/components/schemas/payload"
        interval:
          $ref: "#/components/schemas/interval"

    payload:
      type: object
      properties:
        name:
          type: string
          example: Payload name

    interval:
      type: object
      properties:
        startMillis:
          type: integer
          example: 1432493210000
        endMillis:
          type: integer
          example: 1532483210000

    timezone:
      type: object
      properties:
        name:
          type: string
          example: America/New_York
        currentOffsetMillis:
          type: integer
          example: -14400000

    profile:
      type: object
      properties:
        username:
          type: string
          example: myusername
        tags:
          type: array
          items:
            type: string
        profile:
          type: object
          properties:
            email:
              type: string
              example: profile@email.com
            name:
              type: object
              properties:
                last:
                  type: string
                  example: lastName
                first:
                  type: string
                  example: firstName
        isEnabled:
          type: boolean
        permissions:
          type: array
          items:
            type: string
            example: permission1
        plants:
          type: array
          items:
            type: string
            example: 54321abcdefg
        roles:
          type: array
          items:
            type: string
            example: 54321abcdefgh
        id:
          type: string
          example: 54321abcdefg

    profileWithPassword:
      type: object
      properties:
        username:
          type: string
          example: myusername
        password:
          type: string
          example: abcdefgh@1A
        tags:
          type: array
          items:
            type: string
        profile:
          type: object
          properties:
            email:
              type: string
              example: profile@email.com
            name:
              type: object
              properties:
                last:
                  type: string
                  example: lastName
                first:
                  type: string
                  example: firstName
        isEnabled:
          type: boolean
        permissions:
          type: array
          items:
            type: string
            example: permission1
        plants:
          type: array
          items:
            type: string
            example: 54321abcdefg
        roles:
          type: array
          items:
            type: string
            example: 54321abcdefgh
        id:
          type: string
          example: 54321abcdefg

    profileWithId:
      type: object
      properties:
        username:
          type: string
          example: myusername
        tags:
          type: array
          items:
            type: string
        profile:
          type: object
          properties:
            email:
              type: string
              example: profile@email.com
            name:
              type: object
              properties:
                last:
                  type: string
                  example: lastName
                first:
                  type: string
                  example: firstName
        isEnabled:
          type: boolean
        permissions:
          type: array
          items:
            type: string
            example: permission1
        plants:
          type: array
          items:
            type: string
            example: 54321abcdefg
        roles:
          type: array
          items:
            type: string
            example: 54321abcdefgh
        id:
          type: string
          example: 54321abcdefg

    plantWithId:
      type: object
      properties:
        name:
          type: string
          example: plant
        tenant:
          type: string
          example: string
        id:
          type: string
          example: 54321abcdefgh

    device-comments:
      type: array
      items:
        type: object
        properties:
          deviceUuid:
            type: string
            example: demo-1
          author:
            type: string
            example: John Doe
          interval:
            type: object
            properties:
              startMillis:
                type: integer
                example: 1432493210000
              endMillis:
                type: integer
                example: 1532483210000
          duration:
            type: integer
            example: 60000
          body:
            type: string
            example: This is a sample comment
          createdMillis:
            type: integer
            example: 1432493230000
          commentId:
            type: string
            example: 5ad80d56bfba290001c463d1

    device-comment-request-body:
      type: object
      properties:
        devices:
          type: array
          items:
            type: string
            example: deviceId-1
        start:
          type: string
        end:
          type: string

    device-comment:
      type: object
      properties:
        entity:
          type: string
          example: device
        entityId:
          type: string
          example: demo-1
        author:
          type: string
          example: Jane Doe
        interval:
          type: object
          properties:
            startMillis:
              type: integer
              example: 1432493210000
            endMillis:
              type: integer
              example: 1532483210000
        recordedAt:
          type: number
          example: 1632822423535
        body:
          type: string
          example: This is another comment
        id:
          type: string
          example: 6152e528f4f7801c82278dd2

    #    device-comment-res:
    #      type: object
    #      properties:
    #        entity:
    #          type: string
    #          example: device
    #        entityId:
    #          type: string
    #          example: demo-1
    #        author:
    #          type: string
    #          example: Jane Doe
    #        interval:
    #          type: object
    #          properties:
    #            startMillis:
    #              type: integer
    #              example: 1432493210000
    #            endMillis:
    #              type: integer
    #              example: 1532483210000
    #        id:
    #          type: string
    #          example: "12"
    #        recordedAt:
    #          type: integer
    #          example: 19200000000
    #        body:
    #          type: string
    #          example: This is another comment

#    connectdata-aggregate-req:
#      type: object
#      properties:
#        interval:
#          type: string
#          example: "2018-05-01T00:00:00.000Z/2018-06-01T00:00:00.000Z"
#        binSize:
#          type: string
#          example: 1m
#        stats:
#          type: array
#          items:
#            type: string
#            example: avg
#        dataItemName:
#          type: string
#          example: Xload

#    connectdata-aggregate-res:
#      type: object
#      properties:
#        hits:
#          type: integer
#          example: 2425
#        data:
#          type: array
#          items:
#            type: object
#            properties:
#              bin:
#                type: integer
#                format: timestamp
#                example: 1241516124
#              avg:
#                type: number
#                example: 10.5

    connectdata-mtcdata-current-res:
      type: object
      properties:
        data_item_type:
          type: string
          example: PATH_FEEDRATE
        data_item_name:
          type: string
          example: feed_rate
        timestamp:
          type: string
          format: iso8601
          example: "2018-07-12T00:15:54.467Z"
        value_sample:
          type: number
          example: 90.5
        sub_type:
          type: string
          example: OVERRIDE
        value_event:
          type: string
          example: "FEATURES:\"PNT289,PNT284\" ID:\"DIST24\" CHARACTERISTIC:\"3D DISTANCE\""

    connectdata-mtcdata-res:
      type: array
      items:
        type: array
        items:
          $ref: "#/components/schemas/connectdata-mtcdata-current-res"

    connectdata-connectdata-res:
      type: string
      format: csv
      example: timestamp,data_item_name,data_item_type,sub_type,category,value,units,condition_text,condition_level,native_code,native_severity,qualifier
        2018-05-10 09:13:11.456, exec, EXECUTION, , EVENT, ACTIVE, , , , , ,
        2018-05-10 10:15:31.478, exec, EXECUTION, , EVENT, STOPPED, , , , , ,

    connectdata-res:
      type: object
      properties:
        data:
          type: array
          items:
            type: object
            properties:
              value:
                type: number
                example: 90.5
              key:
                type: number
                example: 1234567890
        isAverage:
          type: boolean

    connectdata-download-res:
      type: object
      format: binary

    no-device:
      type: string
      example: Device is required

    invalid-datatype:
      type: string
      example: Valid data type is required, given data type

    invalid-date:
      type: string
      example: Valid data type is required, given data type

    invalid-created-at:
      type: string
      example: Valid created_at is required, given created_at

    no-data-present:
      type: string
      example: '<html><body>No data available for download for this bike for the requested period</body></html>'

    timeline:
      type: array
      items:
        type: object
        properties:
          type:
            type: string
            example: time-series-classification
          device:
            type: string
            example: device_2
          start:
            type: string
            example: 2018-07-24T04:25:54.689Z
          end:
            type: string
            example: 2018-07-24T07:48:56.048Z
          value:
            type: object
            properties:
              state:
                type: string
                example: unplanned.downtime
              activity:
                type: string
                example: operator-break
          interval:
            type: object
            properties:
              startMillis:
                type: integer
                example: 1532406354689
              endMillis:
                type: integer
                example: 1532418536048

    rawTimeline:
      type: array
      items:
        type: object
        properties:
          type:
            type: string
            example: time-series-classification
          entity:
            type: object
            properties:
              device:
                type: string
                example: device_2
          timestamp:
            type: "string"
            example: "2018-07-24T04:25:54.689Z"
          timestamp_end:
            type: "string"
            example: "2018-07-24T07:48:56.048Z"
          dimensions:
            type: "object"
            properties:
              state:
                type: "string"
                example: "unplanned.downtime"
              activity:
                type: "string"
                example: "operator-break"
          duration:
            type: "number"
            example: 123456789
          measures:
            type: "object"
            properties:
              someMeasure:
                type: "number"
                example: 123
          interval:
            type: "object"
            properties:
              startMillis:
                type: "number"
                example: 1555434543
              endMillis:
                type: "number"
                example: 1555434543

    timelineSchema:
      type: array
      items:
        type: object
        properties:
          type:
            type: string
            example: time-series-classification
          fields:
            type: array
            items:
              example: [
                "dimensions.activity",
                "dimensions.state",
                "duration",
                "entity.device",
                "entity.plant",
                "entity.tenant",
                "timestamp",
                "timestamp_end"
              ]

    timelineLatestSchema:
      type: array
      items:
        type: string
        example: "device-1"

    enrichInput:
      type: object
      properties:
        plant:
          type: string
        input_type:
          type: string
        device_uuid:
          type: string
        state:
          type: string
        activity:
          type: string
        start:
          type: string
        end:
          type: string
      example:
        plant: elevate
        input_type: classification
        device_uuid: device-1
        state: standby
        activity: operator-unknown
        start: "2018-07-11T06:08:44.356Z"
        end: "2018-07-11T06:10:44.356Z"

    enrichRulesDSLInput:
      type: object
      properties:
        ruleConfig:
          type: string
          example: Devices.xml from...Tenant...Plant...
      required:
        - ruleConfig

    enrichRulesJSInput:
      type: object
      properties:
        enrichRule:
          type: string
          example: use strict; var _rxjs = require("rxjs");
      required:
        - enrichRule
    enrichDeviceRuleJSInput:
      type: object
      properties:
        deviceRules:
          type: object
          properties:
            rules:
              type: string
              example: use strict; var _rxjs = require("rxjs");
            requiredEvents:
              type: array
              items:
                type: object
                properties:
                  type:
                    type: string
              example: [
              {"device":"device_1"},
              {"device":"device_2"},
              {"device":"device_3"}
              ]
      required:
        - rules

    enrichDeviceRulesJSPostResponse:
      type: object
      properties:
        _id:
          type: string
          example: "123456"
        device:
          type: string
          example: "demo1234"
        plant:
          type: string
          example: "demo"
        updatedAt:
          type: string
          format: date-time
          example: "2021-06-02T00:00:00.000Z"
        createdAt:
          type: string
          format: date-time
          example: "2021-06-02T00:00:00.000Z"
        __v:
          type: number
          example: 0
        rules:
          type: string
          example: Devices.xml from...Tenant...Plant...
        version:
          type: number
          example: 1
        requiredEvents:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
          example: [
            { "device": "device_1" },
            { "device": "device_2" },
            { "device": "device_3" }
          ]

    enrichDeviceRulesJSResponse:
      type: object
      properties:
        rules:
          type: string
          example: Devices.xml from...Tenant...Plant...
        version:
          type: number
          example: 1
        requiredEvents:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
          example: [
            {"device":"device_1"},
            {"device":"device_2"},
            {"device":"device_3"}
          ]

    enrichRulesRecentlyUpdatedRulesResponse:
      type: object
      properties:
        plant:
          type: string
        updatedAt:
          type: string
          description: date time in ISO 8601 format
        version:
          type: number
          description: version of the document

    enrichInputResponse:
      type: object
      properties:
        message:
          type: string
          example: Request queued successfully

    workInstructionWithPageCount:
      type: object
      properties:
        id:
          type: string
          example: 12345abcdefgh
        devices:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum:
                  - UUID
                example: UUID
              value:
                type: string
                example: Device-Foo-123
        plant:
          type: string
          example: death_star
        title:
          type: string
          example: how to fire the light cannon
        pageCount:
          type: integer
          example: 13

    workInstruction:
      type: object
      properties:
        devices:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum:
                  - UUID
                example: UUID
              value:
                type: string
                example: Device-Foo-123
        title:
          type: string
          example: how to fire the light cannon
        pages:
          type: array
          items:
            $ref: "#/components/schemas/workInstructionPage"

    workInstructionWithId:
      type: object
      properties:
        id:
          type: string
          example: 12345abcdefgh
        plant:
          type: string
          example: demo
        devices:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum:
                  - UUID
                example: UUID
              value:
                type: string
                example: Device-Foo-123
        title:
          type: string
          example: how to fire the light cannon
        pages:
          type: array
          items:
            $ref: "#/components/schemas/workInstructionPage"

    workInstructionPage:
      type: object
      properties:
        title:
          type: string
          example: page title
        content:
          type: string
          example: page content
        triggers:
          type: array
          items:
            $ref: "#/components/schemas/workInstructionPageTrigger"

    workInstructionPageWithId:
      type: object
      properties:
        id:
          type: string
          example: 12345abcdefgh
        title:
          type: string
          example: page title
        content:
          type: string
          example: page content
        triggers:
          type: array
          items:
            $ref: "#/components/schemas/workInstructionPageTrigger"

    workInstructionPageTrigger:
      type: object
      properties:
        operator:
          type: string
          enum:
            - =
            - <
            - ">"
          example: =
        source:
          type: string
          example: source
        value:
          type: object

    requestSortItem:
      type: object
      example:
        direction: asc
        property: created
      properties:
        property:
          type: string
          example: created
        direction:
          enum:
            - asc
            - desc
          type: string
          example: asc

    requestSort:
      type: array
      items:
        $ref: "#/components/schemas/requestSortItem"

    pagedResponse:
      type: object
      properties:
        totalElements:
          type: integer
          description: The total available items for this request
          example: 20
        totalPages:
          type: integer
          description: For the size and total elements the calculated number of pages available
          example: 7
        size:
          type: integer
          description: The number of items in a page
          example: 3
        number:
          type: integer
          description: The page number being returned
          example: 0
        numberOfElements:
          type: integer
          description: The number of items being returned in this page
          example: 3
        first:
          type: boolean
          description: Is this the first page
          example: true
        last:
          type: boolean
          description: Is this the final page
          example: false
        sort:
          $ref: "#/components/schemas/requestSort"

    alerts:
      type: object
      allOf:
        - $ref: "#/components/schemas/pagedResponse"
        - type: object
          properties:
            content:
              type: array
              items:
                $ref: "#/components/schemas/alert"

    alert:
      type: object
      properties:
        id:
          type: string
          example: "123456"
        plant:
          type: string
          example: death_star
        name:
          type: string
          example: laser_cannon
        description:
          type: string
          example: big_laser_cannon
        created:
          type: string
          example: "1970-01-01T01:47:00.000Z"
          format: date-time
        device:
          type: object
          properties:
            type:
              type: string
              enum:
                - UUID
                - TAG
              example: UUID
            value:
              type: string
              example: DEMO-FOO-123
        tags:
          type: array
          items:
            type: string
            example: hi
        watchers:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                example: USER
                enum:
                  - USER
                  - EMAIL
              value:
                type: string
                example: username

    tag:
      type: object
      properties:
        enabled:
          type: boolean
          example: true
        value:
          type: string
          example: quality
        color:
          type: string
          example: white
        id:
          type: string
          example: tagid

    alertTag:
      type: object
      properties:
        enabled:
          type: boolean
          example: true
        value:
          type: string
          example: quality
        color:
          type: string
          example: white

    alertWatcherRule:
      type: object
      properties:
        name:
          type: string
          example: myplant
        enabled:
          type: boolean
          example: true
        devices:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum:
                  - UUID
                  - TAG
                example: UUID
              value:
                type: string
                example: Device-Foo-123
        tags:
          type: array
          items:
            type: string
            example: hi
        watchers:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                example: USER
                enum:
                  - USER
                  - EMAIL
              value:
                type: string
                example: username
        from:
          type: string
          example: 00:00
        to:
          type: string
          example: "14:39"

    alertWatcherRuleWithId:
      type: object
      properties:
        id:
          type: string
          example: abcdefgh
        name:
          type: string
          example: myplant
        enabled:
          type: boolean
          example: true
        devices:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum:
                  - UUID
                  - TAG
                example: UUID
              value:
                type: string
                example: Device-Foo-123
        tags:
          type: array
          items:
            type: string
            example: hi
        watchers:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                example: USER
                enum:
                  - USER
                  - EMAIL
              value:
                type: string
                example: username
        from:
          type: string
          example: 00:00
        to:
          type: string
          example: "14:39"

    uiElement:
      type: object
      properties:
        type:
          type: string
          example: DeviceGrid
        props:
          type: object
        children:
          type: array
          items:
            $ref: "#/components/schemas/uiElement"

    dashboard:
      type: object
      properties:
        tags:
          $ref: "#/components/schemas/dashboardTags"
        id:
          type: string
          example: dashboard-1
        name:
          type: string
          example: Dashboard-1
        element:
          $ref: "#/components/schemas/uiElement"

    dashboards:
      type: array
      items:
        $ref: "#/components/schemas/dashboard"

    dashboardTags:
      type: array
      items:
        type: string
        example: Production

    dashboardBody:
      type: object
      properties:
        name:
          type: string
          example: Dashboard-1
        element:
          $ref: "#/components/schemas/uiElement"

    operatorPanel:
      type: object
      properties:
        id:
          type: string
          example: operator-panel-1
        name:
          type: string
          example: OperatorPanel-1
        element:
          $ref: "#/components/schemas/uiElement"

    operatorPanels:
      type: array
      items:
        $ref: "#/components/schemas/operatorPanel"

    operatorPanelBody:
      type: object
      properties:
        name:
          type: string
          example: operator-panel-1
        element:
          $ref: "#/components/schemas/uiElement"

    report:
      type: object
      properties:
        tags:
          $ref: "#/components/schemas/reportTags"
        id:
          type: string
          example: report-1
        name:
          type: string
          example: Report-1
        element:
          $ref: "#/components/schemas/uiElement"
    reports:
      type: array
      items:
        $ref: "#/components/schemas/report"

    reportTags:
      type: array
      items:
        type: string
        example: Production

    reportBody:
      type: object
      properties:
        name:
          type: string
          example: Report-1
        element:
          $ref: "#/components/schemas/uiElement"

    ticketWatcherRule:
      type: object
      properties:
        name:
          type: string
          example: myplant
        enabled:
          type: boolean
          example: true
        devices:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum:
                  - UUID
                  - TAG
                example: UUID
              value:
                type: string
                example: Device-Foo-123
        types:
          type: array
          items:
            type: string
            example: hi
        watchers:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                example: USER
                enum:
                  - USER
                  - EMAIL
              value:
                type: string
                example: username
        from:
          type: string
          example: 00:00
        to:
          type: string
          example: "14:39"

    ticketWatcherRuleWithId:
      type: object
      properties:
        id:
          type: string
          example: abcdefgh
        name:
          type: string
          example: myplant
        enabled:
          type: boolean
          example: true
        devices:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum:
                  - UUID
                  - TAG
                example: UUID
              value:
                type: string
                example: Device-Foo-123
        types:
          type: array
          items:
            type: string
            example: hi
        watchers:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                example: USER
                enum:
                  - USER
                  - EMAIL
              value:
                type: string
                example: username
        from:
          type: string
          example: 00:00
        to:
          type: string
          example: "14:39"

    commentWithId:
      type: object
      properties:
        id:
          type: string
          example: abcdefgh
        timestamp:
          type: string
          example: 1970-01-01T01:47:00.000Z
          format: date-time
        body:
          type: string
          example: this documentation is going to be epic
        author:
          type: object
          properties:
            type:
              type: string
              enum:
                - USER
                - EMAIL
              example: EMAIL
            value:
              type: string
              example: myemail@api-docs.com

    commentPostBody:
      type: object
      properties:
        body:
          type: string
          example: this documentation is going to be epic
        author:
          type: object
          properties:
            type:
              type: string
              enum:
                - USER
                - EMAIL
              example: EMAIL
            value:
              type: string
              example: myemail@api-docs.com

    editCommentBody:
      type: object
      properties:
        body:
          type: string
          example: this edits the comment body.

    alertApplyWatcherRule:
      type: object
      properties:
        tags:
          type: array
          items:
            type: string
            example: tagid
        timezone:
          type: string
          example: Americe/Chicago
        device:
          type: object
          properties:
            type:
              type: string
              enum:
                - UUID
            value:
              type: string
              example: Device-Foo-123

    ticketApplyWatcherRule:
      type: object
      properties:
        types:
          type: array
          items:
            type: string
            example: tagid
        timezone:
          type: string
          example: Americe/Chicago
        device:
          type: object
          properties:
            type:
              type: string
              enum:
                - UUID
            value:
              type: string
              example: Device-Foo-123

    tickets:
      type: object
      allOf:
        - $ref: "#/components/schemas/pagedResponse"
        - type: object
          properties:
            content:
              type: array
              items:
                $ref: "#/components/schemas/ticket"

    ticket:
      type: object
      properties:
        id:
          type: string
          example: ticket-1
        title:
          type: string
          example: laser_cannon
        description:
          type: string
          example: big_laser_cannon
        status:
          type: string
          enum:
            - OPEN
            - IN_PROGRESS
            - CLOSED
          example: OPEN
        type:
          type: array
          items:
            type: string
            example: 54321abcdefgh
        created:
          type: string
          example: 1970-01-01T01:47:00.000Z
          format: date-time
        creatorId:
          type: string
          example: username
        assigneeId:
          type: string
          example: username
        devices:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum:
                  - UUID
                  - TAG
                example: UUID
              value:
                type: string
                example: DEMO-FOO-123
        watchers:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                example: USER
                enum:
                  - USER
                  - EMAIL
              value:
                type: string
                example: username
        context:
          type: object
        links:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
              status:
                type: string
                enum:
                  - LINKING
                  - LINKED
                  - FAILED
              value:
                type: string

    ticketCreateBody:
      type: object
      properties:
        title:
          type: string
          example: laser_cannon
        description:
          type: string
          example: big_laser_cannon
        status:
          type: string
          enum:
            - OPEN
            - IN_PROGRESS
            - CLOSED
          example: OPEN
        type:
          type: array
          items:
            type: string
            example: 54321abcdefgh
        creatorId:
          type: string
          example: username
        assigneeId:
          type: string
          example: username
        devices:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum:
                  - UUID
                  - TAG
                example: UUID
              value:
                type: string
                example: DEMO-FOO-123
        watchers:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                example: USER
                enum:
                  - USER
                  - EMAIL
              value:
                type: string
                example: username
        context:
          type: object
        links:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
              status:
                type: string
                enum:
                  - LINKING
                  - LINKED
                  - FAILED
              value:
                type: string

    ticketUpdateBody:
      type: object
      properties:
        title:
          type: string
          example: laser_cannon
        description:
          type: string
          example: big_laser_cannon
        status:
          type: string
          enum:
            - OPEN
            - IN_PROGRESS
            - CLOSED
          example: OPEN
        type:
          type: array
          items:
            type: string
            example: 54321abcdefgh
        assigneeId:
          type: string
          example: username
        devices:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum:
                  - UUID
                  - TAG
                example: UUID
              value:
                type: string
                example: DEMO-FOO-123
        watchers:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                example: USER
                enum:
                  - USER
                  - EMAIL
              value:
                type: string
                example: username
        context:
          type: object
        links:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
              status:
                type: string
                enum:
                  - LINKING
                  - LINKED
                  - FAILED
              value:
                type: string
        link:
          type: object
          properties:
            type:
              type: string
              example: LINK

    ticketTypeWithId:
      type: object
      properties:
        enabled:
          type: boolean
          example: true
        value:
          type: string
          example: quality
        color:
          type: string
          example: white
        id:
          type: string
          example: typeid

    ticketType:
      type: object
      properties:
        enabled:
          type: boolean
          example: true
        value:
          type: string
          example: quality
        color:
          type: string
          example: white

    ticketTypeFilterBody:
      type: object
      properties:
        devices:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum:
                  - UUID
              value:
                type: string
                example: Device-Foo-123
        timezone:
          type: string
          example: Americe/Chicago

    emailMailgunBody:
      type: object
      properties:
        timestamp:
          type: number
          example: 198765432101
        token:
          type: string
        signature:
          type: string
        recipient:
          type: string
          example: recipient@email.com
        sender:
          type: string
          example: sender@email.com
        stripped-text:
          type: string
          example: some comment

    accessRight:
      type: object
      properties:
        name:
          type: string
          example: ticketing
        description:
          type: string
          example: Access right for ticketing

    accessRightRequestBody:
      type: object
      properties:
        description:
          type: string
          example: Access right for ticketing

    accessRightList:
      type: array
      items:
        type: string
        example: ticketing

    plantLicense:
      type: object
      properties:
        plantName:
          type: string
          example: demo
        branding:
          type: object
          properties:
            themeName:
              type: string
              example: coromant
        partnerName:
          type: string
          example: coromant
        fromAddress:
          type: string
          example: mail@coromant-notifications.com
        url:
          type: string
          example: app.staging.coromant.us
        fromName:
          type: string
          example: Elevate
        accessRights:
          $ref: "#/components/schemas/accessRightList"

    plantLicenseRequestBody:
      type: object
      properties:
        branding:
          type: object
          properties:
            themeName:
              type: string
              example: coromant
        partnerName:
          type: string
          example: coromant
        accessRights:
          $ref: "#/components/schemas/accessRightList"

    partner:
      type: object
      properties:
        partnerName:
          type: string
          example: coromant
        branding:
          type: object
          properties:
            themeName:
              type: string
              example: coromant
        fromAddress:
          type: string
          example: mail@coromant-notifications.com
        url:
          type: string
          example: app.staging.coromant.us
        fromName:
          type: string
          example: Elevate

    deletePartner:
      type: object
      properties:
        partnerName:
          type: string
          example: coromant
        branding:
          type: object
          properties:
            themeName:
              type: string
              example: coromant

    partnerRequestBody:
      type: object
      properties:
        branding:
          type: object
          properties:
            themeName:
              type: string
              example: coromant

    metricsFilter:
      type: object
      properties:
        filterType:
          type: string
          example: terms
        fieldName:
          type: string
          example: device
        values:
          oneOf:
            - type: string
              example: device-1
            - type: array
              example:
                - device-1
                - device-2
            - type: object
              example:
                gte: 2017-01-01
                lte: 2017-01-02
        options:
          type: object
      required:
        - filterType
        - fieldName
        - values

    metricsBin:
      type: object
      properties:
        binName:
          type: string
          example: by_device
        fieldName:
          type: string
          example: device
        aggType:
          type: string
          example: terms
        options:
          type: object
      required:
        - fieldName
        - aggType

    singleMetric:
      type: string
      example: duration_sum

    singleValueAggregation:
      type: object
      properties:
        name:
          type: string
          example: "sum-measures.foo"
        fieldName:
          type: string
          example: "measures.foo"
        aggregation:
          type: string
          example: "sum"

    multipleMetrics:
      type: array
      items:
        type: string
      example:
        - duration_sum
        - total_part_count

    metricsInput:
      type: object
      properties:
        filters:
          type: object
          properties:
            must:
              type: array
              items:
                $ref: "#/components/schemas/metricsFilter"
            mustNot:
              type: array
              items:
                $ref: "#/components/schemas/metricsFilter"
        bins:
          type: array
          items:
            anyOf:
              - $ref: "#/components/schemas/metricsBin"
        metrics:
          type: array
          items:
            $ref: "#/components/schemas/singleMetric"

    singleValueMetricsInput:
      type: object
      properties:
        filters:
          type: object
          properties:
            must:
              type: array
              items:
                $ref: "#/components/schemas/metricsFilter"
            mustNot:
              type: array
              items:
                $ref: "#/components/schemas/metricsFilter"
        bins:
          type: array
          items:
            anyOf:
              - $ref: "#/components/schemas/metricsBin"
        metricDefinitions:
          type: array
          items:
            $ref: "#/components/schemas/singleValueAggregation"

    flattenedMetricsInput:
      type: object
      properties:
        filters:
          type: object
          properties:
            must:
              type: array
              items:
                $ref: "#/components/schemas/metricsFilter"
            mustNot:
              type: array
              items:
                $ref: "#/components/schemas/metricsFilter"
        bins:
          type: array
          items:
            anyOf:
              - $ref: "#/components/schemas/metricsBin"
        metrics:
          type: array
          items:
            $ref: "#/components/schemas/multipleMetrics"

    target:
      type: object
      properties:
        name:
          type: string
          example: target-1
        metric:
          type: string
          example: utilization
        startWorkday:
          type: string
          example: 2017-01-01
          format: date
        endWorkday:
          type: string
          example: 2017-02-01
          format: date
        isForever:
          type: boolean
        period:
          type: string
          enum:
            - YEAR
            - MONTH
            - WEEK
            - WORKDAY
            - SHIFT
            - HOUR
        scope:
          type: object
          properties:
            device_id:
              type: array
              items:
                type: string
              example:
                - device-1
                - device-2
            kind_id:
              type: array
              items:
                type: string
              example:
                - kind-1
            shift:
              type: array
              items:
                type: string
              example:
                - shift-1
                - shift-2
            device_group:
              type: array
              items:
                type: string
              example:
                - group-1
        targetValue:
          type: number
          example: 420
        targetUnit:
          type: string
          example: percentage
      required:
        - name
        - metric
        - targetValue
        - scope

    searchTargets:
      type: object
      properties:
        startWorkday:
          type: string
          example: 2017-01-01
          format: date
        endWorkday:
          type: string
          example: 2017-02-01
          format: date
        scope:
          type: object
          properties:
            device_id:
              type: array
              items:
                type: string
              example:
                - device-1
                - device-2
            kind_id:
              type: array
              items:
                type: string
              example:
                - kind-3
            shift:
              type: array
              items:
                type: string
              example:
                - shift-1
        metric:
          type: string
          example: utilization

    authAdminPermission:
      type: object
      properties:
        description:
          type: string
          example: Create device cycle
        isPrivate:
          type: boolean
        value:
          type: string
          example: cycle:create
        id:
          type: string
          example: cycle:create

    authAdminPlant:
      type: object
      properties:
        name:
          type: string
          example: demo
        tenant:
          type: string
          example: demo
        id:
          type: string
          example: "123"

    authAdminRole:
      type: object
      properties:
        name:
          type: string
          example: Admin
        permissions:
          type: array
          items:
            type: string
            example: report:read, operator:read

    authAdminRoleWithId:
      type: object
      properties:
        name:
          type: string
          example: Admin
        permissions:
          type: array
          items:
            type: string
            example: report:read, operator:read
        id:
          type: string
          example: "123"

    client:
      type: object
      properties:
        clientId:
          type: string
          example: abc
        clientSecret:
          type: string
          example: abc
        useForClientCredentialsGrantType:
          type: boolean
          example: false
        permissions:
          type: array
          items:
            type: string
            example: tenants:provision:abc

    readClient:
      type: object
      properties:
        clientId:
          type: string
          example: abc
        id:
          type: string
          example: abc
        permissions:
          type: array
          items:
            type: string
            example: tenants:provision:abc
        useForClientCredentialsGrantType:
          type: boolean

    permissions:
      type: object
      properties:
        description:
          type: string
          example: Permission description
        isPrivate:
          type: boolean
          example: false
        value:
          type: string
          example: abc:classify
        id:
          type: string
          example: ajkdsflkjasf

    readTenant:
      type: object
      properties:
        name:
          type: string
          example: abc
        id:
          type: string
          example: abc
        authStrategy:
          type: string
          example: local

    tenant:
      type: object
      properties:
        tenantName:
          type: string
          example: abc
        authStrategy:
          type: string
          example: abc
        adminRole:
          type: object
          properties:
            name:
              type: string
              example: roleA1
            permissions:
              type: array
              items:
                type: string
        adminPassword:
          type: string
          example: password
        plantNames:
          type: array
          items:
            type: string

    userForm:
      type: object
      properties:
        grant_type:
          type: string
          example: password
        username:
          type: string
          example: ""
        password:
          type: string
          example: ""
        client_id:
          type: string
          example: id
        client_secret:
          type: string
          example: secret
        redirect_url:
          type: string
          example: https://app.coromant.us
        refresh_token:
          type: string
          example: jkshdfjkhsdf
      required:
        - grant_type
        - client_id
        - client_secret

    tokenResponse:
      type: object
      properties:
        token_type:
          type: string
          example: password
        access_token:
          type: string
          example: sdfasfdfgdsfg
        refresh_token:
          type: string
          example: sdafsasfsdffgshrteewqdsaf

    perfParameters:
      type: object
      properties:
        category:
          type: string
          example: SAMPLE
          enum:
            - SAMPLE
        name:
          type: string
          example: Sover
        native_units:
          type: string
          example: PERCENT
        sub_type:
          type: string
          example: OVERRIDE
        type:
          type: string
          example: SPINDLE_SPEED
        units:
          type: string
          example: PERCENT

    deviceDataItems:
      type: object
      properties:
        name:
          type: string
          example: S1speed
        type:
          type: string
          example: SPINDLE_SPEED
        category:
          type: string
          example: EVENT
        sub_type:
          type: string
          example: OVERRIDE
        type_ns:
          type: string
          example: x

    device:
      type: object
      properties:
        uuid:
          type: string
          example: laser_cannon_e00juf
        name:
          type: string
          example: laser_cannon
        enabled:
          type: boolean
          example: true
        tags:
          type: array
          items:
            type: string
            example: Mill
          example:
            - Mill
            - Lathe
        performanceParameters:
          type: object
          properties:
            historicalDataItems:
              type: array
              items:
                $ref: "#/components/schemas/perfParameters"
            realtimeDataItems:
              type: array
              items:
                $ref: "#/components/schemas/perfParameters"
        allowProducing:
          type: boolean
          example: false
        currentCycleClassify:
          type: string
          example: ENTIRE
          enum:
            - ENTIRE
            - FROMNOW
        dataItems:
          type: array
          items:
            $ref: "#/components/schemas/deviceDataItems"
        hasRealtimeData:
          type: boolean
          example: true

    device-post:
      type: object
      properties:
        tenant:
          type: string
          example: laser here
        plant:
          type: string
          example: laser
        uuid:
          type: string
          example: laser_cannon_e00juf
        name:
          type: string
          example: laser_cannon
        enabled:
          type: boolean
          example: true
        tags:
          type: array
          items:
            type: string
            example: Mill
          example:
            - Mill
            - Lathe
        performanceParameters:
          type: object
          properties:
            historicalDataItems:
              type: array
              items:
                $ref: "#/components/schemas/perfParameters"
            realtimeDataItems:
              type: array
              items:
                $ref: "#/components/schemas/perfParameters"
        allowProducing:
          type: boolean
          example: false
        currentCycleClassify:
          type: string
          example: ENTIRE
          enum:
            - ENTIRE
            - FROMNOW
        data_items:
          type: array
          items:
            $ref: "#/components/schemas/deviceDataItems"
        probe:
          $ref: "#/components/schemas/device-post-probe"

    device-tags:
      type: array
      items:
        type: string
        example: Mill
      example:
        - Mill
        - Lathe

    device-probe:
      type: object
      properties:
        uuid:
          type: string
          example: laser_cannon_e00juf
        name:
          type: string
          example: laser_cannon
        enabled:
          type: boolean
          example: true
          enum:
            - true
            - false
        probe:
          type: object
          properties:
            id:
              type: string
              example: laser_cannon_e00juf_5000
            name:
              type: string
              example: laser_cannon
            uuid:
              type: string
              example: laser_cannon_e00juf
            description:
              type: object
              properties:
                "#value":
                  type: string
                  example: Laser Cannon - Model C250
                manufacturer:
                  type: string
                  example: LaserGun Mfg
                model:
                  type: string
                  example: C250
            data_items:
              type: object
            #              example: "{...}"
            components:
              type: object
            #              example: "{...}"
            mtconnect_device_attributes:
              type: object
        #              example: "{...}"
        tags:
          $ref: "#/components/schemas/device-tags"
        deviceType:
          type: string
          example: MTConnectDevice
        hasRealtimeData:
          type: boolean
          example: true
    device-post-probe:
      type: object
      properties:
        tag:
          type: string
          example: MTConnectDevices
        instance_id:
          type: string
          example: "14623782932"
        agent_version:
          type: string
          example: 1.3.5
        plant:
          type: string
          example: laser here
        tenant:
          type: string
          example: laser
        device_uuid:
          type: string
          example: laser_cannon_e00juf
        probe:
          type: object
          properties:
            id:
              type: string
              example: laser_cannon_e00juf_5000
            name:
              type: string
              example: laser_cannon
            uuid:
              type: string
              example: laser_cannon_e00juf
            description:
              type: object
              properties:
                "#value":
                  type: string
                  example: Laser Cannon - Model C250
                manufacturer:
                  type: string
                  example: LaserGun Mfg
                model:
                  type: string
                  example: C250
            data_items:
              type: object
            #              example: "{...}"
            components:
              type: object
            #              example: "{...}"
            mtconnect_device_attributes:
              type: object
        #              example: "{...}"
        tags:
          $ref: "#/components/schemas/device-tags"

    plant-activities:
      type: object
      properties:
        id:
          type: string
          example: workpiece-handling
        name:
          type: string
          example: Workpiece Handling
        description:
          type: string
          example: This is the downtime used to refer to handling of workpiece
        show:
          type: boolean
          example: true
          enum:
            - true
            - false

    plant-mapping:
      type: object
      properties:
        stateId:
          type: string
          example: producing
        activities:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                example: workpiece-handling
              rank:
                type: integer
                example: 3
              forceComment:
                type: boolean
                example: true
                enum:
                  - true
                  - false

    plant-states:
      type: object
      properties:
        id:
          type: string
          example: data-unavailable
        name:
          type: string
          example: Data Unavailable
        show:
          type: boolean
          example: true
          enum:
            - true
            - false

    plant-state-activities:
      type: object
      properties:
        activities:
          type: array
          items:
            $ref: "#/components/schemas/plant-activities"
        mapping:
          type: array
          items:
            $ref: "#/components/schemas/plant-mapping"
        states:
          type: array
          items:
            $ref: "#/components/schemas/plant-states"

    rawTimelineRequest:
      type: "object"
      properties:
        type:
          type: "array"
          items:
            type: "string"
            example: "time-series-classification"
        start:
          type: "string"
          example: "2019-04-23T04:51:18.593Z"
        end:
          type: "string"
          example: "2019-04-24T04:51:18.593Z"
        entity:
          type: "object"
          example: {"device": ["demo-1"]}

    timelineLatestInput:
      type: object
      properties:
        type:
          type: array
          items:
            type: string
            example: "time-series-classification"
        entity:
          type: object
          example: {"device": ["device-1"]}
        dimensions:
          type: object
          example: {"state": ["producing"]}
        aggregateBy:
          type: object
          example: {"entity": ["device"]}

    hierarchy_devices:
      type: array
      items:
        type: object
        properties:
          uuid:
            type: string
            example: "d1"
          path:
            type: string
            example: "p1.d1"
    valueMappingSchema:
      type: array
      items:
        type: object
        properties:
          device:
            type: string
            example: "d1"
          type:
            type: string
            example: "p1.d1.type"
          originalValue:
            type: string
            example: "p1.d1.orignalvalue"
          mappedValue:
            type: string
            example: "p1.d1.mappedvalue"

    valueMappingResultsSchema:
      type: array
      items:
        type: object
        properties:
          device:
            type: string
            example: "d1"
          plant:
            type: string
            example: "p1"
          type:
            type: string
            example: "p1.d1.type"
          values:
            type: object
            properties:
              p1.d1.originalValue-1:
                type: string
                example: "p1.d1.mappedValue-1"

    hierarchy:
      type: object
      properties:
        devices:
          type: array
          items:
            $ref: "#/components/schemas/hierarchy_devices"
        plant:
          type: string
          example: "p1"
        validity_start:
          type: string
          description: "ISO 8601 formatted timestamp in UTC"
          example: "2020-08-04T00:00:00.000Z"
    node:
      type: object
      properties:
        title:
          type: string
          example: "Node Title"
        content:
          type: string
          example: "[{'type':'paragraph','children':[{'text':'Node Content'}]}]"
        rank:
          type: number
          default: 0
        parent:
          type: string
          example: "5f1fe4d49d750645820a9aaf"

    nodeWithId:
      type: object
      properties:
        id:
          type: string
          example: "5f1fe4d49d750645820a9aae"
        title:
          type: string
          example: "Node Title"
        content:
          type: string
          example: "[{'type':'paragraph','children':[{'text':'Node Content'}]}]"
        rank:
          type: number
          default: 0
        parent:
          type: string
          example: "5f1fe4d49d750645820a9aaf"
        path:
          type: string
          example: "5f1fe4d49d750645820a9aae#5f1fe4d49d750645820a9aaf"
    putRuleRequest:
      type: object
      properties:
        body:
          type: string
          example: "const a = 1;"
    ruleEntry:
      type: object
      properties:
        body:
          type: string
          example: "const a = 1;"
    ruleEntries:
      type: array
      items:
        $ref: "#/components/schemas/ruleEntry"
    putRulesetRequest:
      type: object
      properties:
        rules:
          type: array
          example: ["rulename-1", "rulename-2"]
          items:
            type: string
    rulesetEntry:
      type: object
      properties:
        rules:
          type: array
          example: ["rulename-1", "rulename-2"]
          items:
            type: string
        name:
          type: "string"
          example: "model-x"
    rulesetEntries:
      type: array
      items:
        $ref: "#/components/schemas/rulesetEntry"
    defaultRulesetEntry:
      type: object
      properties:
        rules:
          type: array
          example: ["rulename-1", "rulename-2"]
          items:
            type: string
    putDeviceRequest:
      type: object
      properties:
        devices:
          type: array
          example: ["device-1", "device-2"]
          items:
            type: string
        ruleset:
          type: string
          example: "model-x"
    deviceJsRules:
      type: object
      properties:
        version:
          type: integer
          example: 1
        rules:
          type: string
          example: "const a = 1;"
    deviceEntry:
      type: object
      properties:
        ruleset:
          type: string
          example: "model-x"
        device:
          type: string
          example: "device-1"
        version:
          type: integer
          example: 1
    deviceEntries:
      type: array
      items:
        $ref: "#/components/schemas/deviceEntry"
    postDeviceRegistry:
      type: object
      properties:
        devices:
          type: array
          items:
            type: string
          example: ["device-1", "device-2"]
        fields:
          type: array
          items:
            type: string
          example: ["field-1", "field-2"]

    putDeviceRegistry:
      type: object
      example: {model: "m1", manufacturer: {name: "foo", code: "123"}}

    deviceRegistryEntry:
      type: object
      properties:
        plant:
          type: string
        device:
          type: string
      example: {plant: "p1", device: "d1", model: "m1"}

    namespace:
      type: string
      description: plant name

    taskCreationRequest:
      description: task creation request
      type: object
      properties:
        planName:
          $ref: "#/components/schemas/planName"
        assetIDs:
          $ref: "#/components/schemas/assetIDs"
        conditions:
          $ref: "#/components/schemas/conditions"
        taskDefinitions:
          $ref: "#/components/schemas/taskDefinitions"

    taskDefinition:
      type: object
      description: task creation template for task system
      example: { ticketTypeNames : [ComponentUsage], title: TicketTitle, timezone: America/Chicago}
    taskDefinitions:
      description: list of task creation templates for task system
      items:
        $ref: "#/components/schemas/taskDefinition"




    state:
      type: string
      description: state of an activity
      enum: [Predicted, Pending, Completed, Canceled]
      example: Pending

    status:
      type: string
      description: status of task query
      example: success

    taskSystem:
      type: string
      description: name of task system
      example: ticketing

    taskID:
      type: string
      description: ID of task created in task system
      example: "123"
    taskIDs:
      type: array
      description: list of IDs of task created in task system
      items:
        $ref: "#/components/schemas/taskID"
      example: ["123","234","345"]

    assetID:
      type: string
      description: ID of asset
      example: "Asset1"
    assetIDs:
      type: array
      description: list of IDs of assets
      items:
        $ref: "#/components/schemas/assetID"
      example: ["Asset1","Asset2"]

    planID:
      type: string
      description: ID of the plan
      example: "60b502323b80d9054a28fabc"
    planName:
      type: string
      description: name of the plan
      example: "Plan1234"

    activityID:
      type: string
      description: ID of an activity
      example: "60b502323b80d9054a28f123"

    filtersetID:
      type: string
      description: ID of an filterset
      example: "60b502323b80d9054a28f123"

    subscriptionID:
      type: string
      description: ID of an subscription
      example: "60b502323b80d9054a28f123"

    expectedAt:
      type: string
      format: date-time
      description: predicted date for activity creation in ISO-8601 format
      example: "2021-06-02T12:06:42.662Z"

    currentValues:
      type: array
      description: Usage of component so far
      items:
        type: object
        properties:
          conditionType:
            type:  string
          currentValue:
            type: number
            description: Usage of component so far
            example: 100

    evaluatedTs:
      type: string
      format: date-time
      description: time when condition or prediction was evaluated in ISO-8601 format
      example: "2021-06-02T12:06:42.662Z"

    pendingAt:
      type: string
      format: date-time
      description: date when pending activity is created in ISO-8601 format
      example: "2021-06-02T12:06:42.662Z"

    completedAt:
      type: string
      format: date-time
      description: time when activity was closed in ISO-8601 format
      example: "2021-06-02T12:06:42.662Z"

    threshold:
      type: object
      description: threshold ceiling and floor
      properties:
        lte:
          type: number
          description: threshold ceiling inclusive
          example: 40
        gte:
          type: number
          description: threshold floor inclusive
          example: 20

    frequency:
      type: string
      description: defines when to evaluate condition
      example: "UTC 0 * * * *"

    scheduled:
      type: object
      description: condition for Scheduled Condition
      properties:
        conditionType:
          type: string
          example: "Scheduled"
        threshold:
          $ref: "#/components/schemas/threshold"
        frequency:
          $ref: "#/components/schemas/frequency"
        criteria:
          type: array
          description: list of criteria for condition
          default: []
          items:
            type: object
          example: []

    udtPercentage:
      type: object
      description: condition for Unplanned Downtime Percentage
      properties:
        conditionType:
          type: string
          example: "UDTPercentage"
        threshold:
          $ref: "#/components/schemas/threshold"
        frequency:
          $ref: "#/components/schemas/frequency"
        criteria:
          type: array
          description: list of criteria for condition
          default: []
          items:
            type: object
          example: []

    failureRecoveryDuration:
      type: object
      description: condition for Failure Recovery Duration
      properties:
        conditionType:
          type: string
          example: "FailureRecoveryDuration"
        threshold:
          $ref: "#/components/schemas/threshold"
        frequency:
          $ref: "#/components/schemas/frequency"
        criteria:
          type: array
          description: list of criteria for condition
          default: []
          items:
            type: object
          example: []

    nativeCodeCriteria:
      type: object
      description: criteria for native code
      properties:
        type:
          type: string
          description: type of criteria
          example: nativeCode
        value:
          type: array
          description: list of nativeCodes to filter
          items:
            type: string
          example: [ "101", "200" ]

    mtcConditionNativeCodeConditionTextCountCondition:
      type: object
      description: condition for Fault Frequency
      properties:
        conditionType:
          type: string
          example: "MTCConditionNativeCodeConditionTextCount"
        threshold:
          $ref: "#/components/schemas/threshold"
        frequency:
          $ref: "#/components/schemas/frequency"
        criteria:
          type: array
          description: list of criteria for condition
          items:
            oneOf:
              - $ref: "#/components/schemas/nativeCodeCriteria"

    mtcConditionStackedNativeCodeConditionTextCountCondition:
      type: object
      description: condition for Fault Frequency
      properties:
        conditionType:
          type: string
          example: "MTCConditionStackedNativeCodeConditionTextCount"
        threshold:
          $ref: "#/components/schemas/threshold"
        frequency:
          $ref: "#/components/schemas/frequency"
        criteria:
          type: array
          description: list of criteria for condition
          items:
            oneOf:
              - $ref: "#/components/schemas/nativeCodeCriteria"

    mtcConditionStackedNativeCodeCountCondition:
      type: object
      description: condition for Fault Frequency
      properties:
        conditionType:
          type: string
          example: "MTCConditionStackedNativeCodeCount"
        threshold:
          $ref: "#/components/schemas/threshold"
        frequency:
          $ref: "#/components/schemas/frequency"
        criteria:
          type: array
          description: list of criteria for condition
          items:
            oneOf:
              - $ref: "#/components/schemas/nativeCodeCriteria"

    mtcConditionNativeCodeStackedCountCondition:
      type: object
      description: condition for Fault Frequency
      properties:
        conditionType:
          type: string
          example: "MTCConditionNativeCodeStackedCount"
        threshold:
          $ref: "#/components/schemas/threshold"
        frequency:
          $ref: "#/components/schemas/frequency"
        criteria:
          type: array
          description: list of criteria for condition
          items:
            oneOf:
              - $ref: "#/components/schemas/nativeCodeCriteria"

    mtcConditionCountCondition:
      type: object
      description: condition for Fault Frequency
      properties:
        conditionType:
          type: string
          example: "MTCConditionCount"
        threshold:
          $ref: "#/components/schemas/threshold"
        frequency:
          $ref: "#/components/schemas/frequency"
        criteria:
          type: array
          description: list of criteria for condition
          items:
            oneOf:
              - $ref: "#/components/schemas/nativeCodeCriteria"

    componentUsageCondition:
      type: object
      description: condition for Component Usage
      properties:
        conditionType:
          type: string
          example: "ComponentUsage"
        threshold:
          $ref: "#/components/schemas/threshold"
        frequency:
          $ref: "#/components/schemas/frequency"
        criteria:
          type: array
          description: list of criteria for condition
          default: []
          items:
            type: object
          example: []

    condition:
      oneOf:
        - $ref: "#/components/schemas/componentUsageCondition"
        - $ref: "#/components/schemas/mtcConditionCountCondition"
        - $ref: "#/components/schemas/mtcConditionNativeCodeStackedCountCondition"
        - $ref: "#/components/schemas/mtcConditionStackedNativeCodeCountCondition"
        - $ref: "#/components/schemas/mtcConditionStackedNativeCodeConditionTextCountCondition"
        - $ref: "#/components/schemas/mtcConditionNativeCodeConditionTextCountCondition"
        - $ref: "#/components/schemas/failureRecoveryDuration"
        - $ref: "#/components/schemas/udtPercentage"
        - $ref: "#/components/schemas/scheduled"

    conditions:
      type: array
      description: list of conditions
      items:
        $ref: "#/components/schemas/condition"

    createdAt:
      type: string
      description: time of creation of plan in ISO-8601 format
      format: date-time
      example: "2021-06-02T12:06:42.662Z"


    filtersetPUTModel:
      type: object
      description: model of filterset without creation time
      properties:
        id:
          $ref: "#/components/schemas/filtersetID"
        name:
          type: string
          description: name of the filterset
          example: 1YearEDM
        active:
          type: boolean
          description: signifies filterset is usable or not
          example: true
        deviceUUIDs:
          type: array
          description: list of devices to be included
          items:
            type: string
            description: device id
            example: device1
        excludedDeviceUUIDs:
          type: array
          description: list of devices to be excluded
          items:
            type: string
            description: device id
            example: device1
        devicesWhiteListPattern:
          type: string
          description: regular expression for whitelisting devices
          example: .*Device.*
        devicesBlackListPattern:
          type: string
          description: regular expression for blacklisting devices
          example: .*Device.*
        dateRange:
          type: number
          description: duration of date range selected in ms
          example: 300000
        nativeCodes:
          type: array
          description: list of native codes
          items:
            type: string
            description: native code
            example: "300"
        nativeCodesWhiteListPattern:
          type: string
          description: regular expression whitelist pattern for native code
        faultThreshold:
          $ref: "#/components/schemas/threshold"
        faultRecoveryDuration:
          $ref: "#/components/schemas/threshold"
        groupBy:
          type: string
          description: condition type for Fault Frequency plans
          example: MTCConditionCount

    filterset:
      allOf:
        - $ref: "#/components/schemas/filtersetPUTModel"
        - type: object
          properties:
            createdAt:
              $ref: "#/components/schemas/createdAt"

    filtersets:
      type: array
      items:
        $ref: "#/components/schemas/filterset"

    subscriptionFilters:
      type: array
      description: filters
      items:
        type: object
      example: [ { } ]

    subscriptionEmailIDs:
      type: array
      description: list of emailIDs
      items:
        type: string
        description: emailID
        example: abc@coromant.com

    subscriptionName:
      type: string
      description: name of the subscription
      example: subscription1

    subscriptionSchedule:
      type: string
      description: frequency of schedule
      example: UTC * 0 * * *

    subscriptionPUTModel:
      type: object
      properties:
        filters:
          $ref: "#/components/schemas/subscriptionFilters"
        emailIDs:
          $ref: "#/components/schemas/subscriptionEmailIDs"
        name:
          $ref: "#/components/schemas/subscriptionName"
        schedule:
          $ref: "#/components/schemas/subscriptionSchedule"

    subscriptionModel:
      type: object
      description: model of subscription without creation time
      properties:
        id:
          $ref: "#/components/schemas/subscriptionID"
        name:
          $ref: "#/components/schemas/subscriptionName"
        namespace:
          type: string
          description: namespace for subscription
          example: elevate
        emailIDs:
          $ref: "#/components/schemas/subscriptionEmailIDs"
        schedule:
          $ref: "#/components/schemas/subscriptionSchedule"
        filters:
          $ref: "#/components/schemas/subscriptionFilters"
        lastScheduled:
          type: string
          format: date-time
          description: timestamp of last scheduled email in ISO-8601 format
          example: "2021-06-02T12:06:42.662Z"
        createdAt:
          $ref: "#/components/schemas/createdAt"

    subscriptions:
      type: array
      items:
        $ref: "#/components/schemas/subscriptionModel"

    activity:
      type: object
      description: model of activity
      properties:
        id:
          $ref: "#/components/schemas/activityID"
        namespace:
          $ref: "#/components/schemas/namespace"
        taskSystem:
          $ref: "#/components/schemas/taskSystem"
        taskIDs:
          $ref: "#/components/schemas/taskIDs"
        assetID:
          $ref: "#/components/schemas/assetID"
        planID:
          $ref: "#/components/schemas/planID"
        state:
          $ref: "#/components/schemas/state"
        completedAt:
          $ref: "#/components/schemas/completedAt"
        expectedAt:
          $ref: "#/components/schemas/expectedAt"
        currentValues:
          $ref: "#/components/schemas/currentValues"
        pendingAt:
          $ref: "#/components/schemas/pendingAt"

    activities:
      items:
        $ref: "#/components/schemas/activity"

    plan:
      type: object
      description: model of plan
      properties:
        id:
          $ref: "#/components/schemas/planID"
        namespace:
          $ref: "#/components/schemas/namespace"
        assetIDs:
          $ref: "#/components/schemas/assetIDs"
        conditions:
          $ref: "#/components/schemas/conditions"
        createdAt:
          $ref: "#/components/schemas/createdAt"
    plans:
      type: array
      description: list of plans
      items:
        $ref: "#/components/schemas/plan"

    assetMetaData:
      type: object
      properties:
        contentType:
          type: string
          example: "image/png"
        created:
          type: string
          example: "2021-10-04T06:53:59.988Z"
        description:
          type: string
          example: "description"
        id:
          type: string
          example: "615aa5070d88a77585dc5583"
        name:
          type: string
          example: "Screenshot from 2021-09-18 07-06-08.png"
        size:
          type: number
          example: 11238
        tags:
          type: array
          items:
            type: string
          example: ["knowledgebase"]

    media:
      type: object
      properties:
        binary:
          type: object
          properties:
            type:
              type: string
              example: "Buffer"
            data:
              type: array
              items:
                type: number
              example: [137,23,45]
        contentType:
          type: string
          example: "image/png"
        created:
          type: string
          example: "2021-10-04T06:53:59.988Z"
        description:
          type: string
          example: "description"
        id:
          type: string
          example: "615aa5070d88a77585dc5583"
        name:
          type: string
          example: "Screenshot from 2021-09-18 07-06-08.png"
        size:
          type: number
          example: 11238
        tags:
          type: array
          items:
            type: string
          example: ["knowledgebase"]

  parameters:
    periodOptParam:
      name: period
      in: query
      required: false
      description: Valid period string
      schema:
        type: string
        default: shift
        example: workday
    timestampOptParam:
      name: timestamp
      in: query
      required: false
      description: ISO 8601 formatted timestamp
      schema:
        type: string
    durationParam:
      name: duration
      in: query
      required: true
      description: ISO 8601 duration string
      schema:
        type: string
        example: PT1H
    deviceUuidParam:
      name: deviceUuid
      in: query
      required: true
      description: Semi-colon separated list of valid device identifiers
      schema:
        type: string
    #    deviceUuidsParam:
    #      name: deviceUuids
    #      in: query
    #      required: true
    #      description: Semi-colon separated list of valid device identifiers
    #      schema:
    #        type: string
    deviceUuidsOptParam:
      name: deviceUuids
      in: query
      required: false
      description: Semi-colon separated list of valid device identifiers
      schema:
        type: string
    overlappingParam:
      name: overlapping
      in: query
      required: true
      description: / separated ISO 8601 formatted timestamp in UTC (start/end)
      schema:
        type: string
    overlappingDelimSemiOptParam:
      name: overlapping
      in: query
      required: false
      description: Semi colon separated ISO 8601 formatted timestamp in UTC (start/end)
      schema:
        type: string
    device_uuidParam:
      name: device_uuid
      in: query
      required: true
      description: Valid device identifier
      schema:
        type: string
    containingParam:
      name: containing
      in: query
      required: true
      description: / separated ISO 8601 formatted timestamp in UTC (start/end with
        end-start <= 24h)
      schema:
        type: string
    dataItemNameOptParam:
      name: data_item_name
      in: query
      required: false
      description: Semi-colon separated valid data item names
      schema:
        type: string
    dataItemTypeOptParam:
      name: data_item_type
      in: query
      required: false
      description: Semi-colon separated valid data item types
      schema:
        type: string
    subTypeOptParam:
      name: sub_type
      in: query
      required: false
      description: Semi-colon separated valid data item sub-types
      schema:
        type: string
    dataItemNameCamelParam:
      name: dataItemName
      in: query
      required: true
      description: Valid data item name
      schema:
        type: string
    binSizeParam:
      name: binSize
      in: query
      required: true
      description: "Valid binSize in M | w | d | h | m | s | y | ms"
      example: 1s
      schema:
        type: string
    statsParam:
      name: stats
      in: query
      required: false
      description: Semi-colon separated valid stats type
      schema:
        type: array
        items:
          type: string
          example: avg
    categoryParam:
      name: category
      in: query
      required: false
      description: category, by default its set to \"value_sample\"
      schema:
        type: string
    dataItemNamesParam:
      name: data_item_names
      in: query
      required: true
      description: Semi-colon separated valid data item names
      schema:
        type: string
    nameParam:
      name: name
      in: query
      required: true
      description: File name for the downloaded data
      schema:
        type: string
    timezoneParam:
      name: timezone
      in: query
      required: true
      description: Timezone of the plant
      schema:
        type: string
    plantParam:
      name: plant
      in: query
      required: true
      description: Plant with which the device is associated
      schema:
        type: string
    authorizationParam:
      name: authorization
      in: query
      required: true
      description: JWT of the user
      schema:
        type: string
    deviceParam:
      name: device
      in: query
      required: true
      description: Valid device identifier
      schema:
        type: string
    deviceOptParam:
      name: device
      in: query
      required: false
      description: Valid device identifier
      schema:
        type: string
    sizeParam:
      name: size
      in: query
      required: false
      description: Number of items in the page page=20
      schema:
        type: string
    pageParam:
      name: page
      in: query
      required: false
      description: Page number to fetch page=0 must not be less than 0
      schema:
        type: string
    sortParam:
      name: sort
      in: query
      required: false
      example: null
      description: Sort order sort=name:desc&sort=created:asc
      schema:
        type: string
    tagOptParam:
      name: tag
      in: query
      required: false
      description: Valid tag identifier
      schema:
        type: string
    tagForDeviceGroupOptParam:
      name: tags
      in: query
      required: false
      description: Semi colon separated list of valid device groups identifier
      schema:
        type: string
    typesOptParam:
      name: types
      in: query
      required: false
      description: Semi colon separated valid types identifier
      schema:
        type: string
    startParam:
      name: start
      in: query
      required: true
      description: ISO 8601 formatted timestamp in UTC
      schema:
        type: string
    startOptParam:
      name: start
      in: query
      required: false
      description: ISO 8601 formatted timestamp in UTC
      schema:
        type: string
    endParam:
      name: end
      in: query
      required: true
      description: ISO 8601 formatted timestamp in UTC, must be > start
      schema:
        type: string
    dateParam:
      name: date
      in: query
      required: true
      description: Date formatted in yyyy-mm-dd format
      schema:
        type: string
    dataTypeParam:
      name: data_type
      in: query
      required: true
      description: Contains one of ["can-raw", "parsed"]
      schema:
        type: string
    createdAtParam:
      name: created_at
      in: query
      required: true
      description: ISO 8601 formatted timestamp in UTC
      schema:
        type: string
    timelineParam:
      name: timeline
      in: query
      required: true
      description: Name of the timeline to retreive
      schema:
        type: string
        enum:
          - time-series-classification
          - time-series-kind
          - time-series-process
          - time-series-part-instance
          - time-series-shift
          - condition
    endOptParam:
      name: end
      in: query
      required: false
      description: ISO 8601 formatted timestamp in UTC, must be > start
      schema:
        type: string
    nativeCodeOptParam:
      name: native_code
      in: query
      required: false
      description: Valid native_code identifier. Needed only when querying for condition timeline.
      schema:
        type: string
    idParam:
      name: id
      in: path
      required: true
      description: Valid id
      schema:
        type: string
    ticketIdParam:
      name: ticketId
      in: path
      required: true
      description: Valid ticket Id
      schema:
        type: string
    commentIdParam:
      name: commentId
      in: path
      required: true
      description: Valid comment Id
      schema:
        type: string
    ruleNameParam:
      name: ruleName
      in: path
      required: true
      description: Valid rule name
      schema:
        type: string
    rulesetNameParam:
      name: rulesetName
      in: path
      required: true
      description: Valid ruleset name
      schema:
        type: string
    devicePathParam:
      name: device
      in: path
      required: true
      description: Valid device name
      schema:
        type: string
    #    kindParam:
    #      name: kind
    #      in: path
    #      required: true
    #      description: Valid kind
    #      schema:
    #        type: string
    #    deviceTagParam:
    #      name: deviceTag
    #      in: query
    #      required: true
    #      description: Valid device group identifier
    #      schema:
    #        type: string
    deviceTagOptParam:
      name: deviceTag
      in: query
      required: false
      description: Valid device group identifier
      schema:
        type: string
    deviceUuidSingleParam:
      name: deviceUuid
      in: query
      required: true
      description: Valid device identifier
      schema:
        type: string
    deviceUuidOptParam:
      name: deviceUuid
      in: query
      required: false
      description: Valid device identifier
      schema:
        type: string
    tenantParam:
      name: tenant
      in: path
      required: true
      description: Valid tenant identifier
      schema:
        type: string
    plantNameParam:
      name: plantName
      in: path
      required: true
      description: Valid plant name identifier
      schema:
        type: string
    partnerParam:
      name: partner
      in: path
      required: true
      description: Valid plant name identifier
      schema:
        type: string
    workInstructionIdParam:
      name: workInstructionId
      in: path
      required: true
      description: Valid id
      schema:
        type: string
    xTenantHeader:
      name: X-Tenant
      in: header
      required: true
      description: Plant name
      schema:
        type: string
    updatedAt:
      name: updatedAt
      in: query
      required: true
      description: updatedAt timestamp in epoch millis
      schema:
        type: number
    workdayParam:
      name: workday
      in: query
      required: true
      description: Valid id
      schema:
        type: string
      example: "2020-02-07"

    taskID:
      name: taskID
      description: ID of task in task system
      in: path
      required: true
      schema:
        type: string
      example: "123"

    taskSystem:
      name: taskSystem
      description: name of task system
      in: path
      required: true
      schema:
        type: string
      example: ticketing

    assetIDs:
      name: assetIDs
      description: comma separated IDs of assets
      in: query
      required: true
      schema:
        type: string
      example: "Asset1,Asset2"

    assetID:
      name: assetID
      in: query
      required: true
      description: ID of asset
      schema:
        type: string
      example: "Asset1"

    planID:
      name: planID
      in: query
      required: true
      description: ID of plan
      schema:
        type: string
      example: "60b502323b80d9054a28fabc"

    from:
      name: from
      in: query
      required: true
      description: from time in ISO-8601 format
      schema:
        type: string
        format: date-time
      example: "2021-06-02T00:00:00.000Z"

    to:
      name: to
      in: query
      required: true
      description: to time in ISO-8601 format
      schema:
        type: string
        format: date-time
      example: "2021-06-03T00:00:00.000Z"

    taskIDs:
      name: taskIDs
      in: query
      required: true
      description: comma separated list of valid IDs of tasks
      schema:
        type: string
      example: "123,234,345"

    threshold:
      name: threshold
      in: query
      required: true
      description: threshold floor of condition
      schema:
        type: number
      example: 200

    page:
      name: page
      in: query
      required: true
      description: page number for getting plans
      schema:
        type: number
      example: 2

    size:
      name: size
      in: query
      required: true
      description: number of plans to get in a page
      schema:
        type: number
      example: 50

    assetType:
      name: type
      in: query
      description: Type of the asset
      schema:
        type: string
      example: "any"

    assetId:
      name: assetId
      in: path
      required: true
      description: Asset ID
      schema:
        type: string

  responses:
    Unauthorized:
      description: Unauthorized
      content:
        application/json:
          schema:
            type: string
            example: Unauthorized
    InsufficientPerms:
      description: Insufficient Perms
      content:
        application/json:
          schema:
            type: string
            example: Insuffiecient Perms
    Forbidden:
      description: Forbidden
      content:
        application/json:
          schema:
            type: string
            example: Forbidden
    BadRequest:
      description: Bad Request
      content:
        application/json:
          schema:
            type: string
            example: Bad request
    ServerError:
      description: Server Error
      content:
        application/json:
          schema:
            oneOf:
              - type: string
              - type: object
    NotModified:
      description: Not Modified
      content:
        application/json:
          schema:
            type: string
            example: Not Modified
    NotFound:
      description: Not Found
      content:
        application/json:
          schema:
            type: string
            example: Not Found
    Accepted:
      description: Accepted
      content:
        application/json:
          schema:
            type: string
            example: Accepted
    Created:
      description: Created
      content:
        application/json:
          schema:
            type: string
            example: Created
    UnprocessableEntity:
      description: Unprocessable Entity
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
                example: Validation Error
              message:
                type: string
                example: Expected a string
    NoDuration:
      description: No duration
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
                example: InvalidInputError
              message:
                type: string
                example: No duration specified.
    NoCalendar:
      description: No calendar
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
                example: NotFoundError
              message:
                type: string
                example: No calendar for the given plant.
    NoSuchCalendarEvent:
      description: No such calendar event
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
                example: NotFoundError
              message:
                type: string
                example: No such calendar event
    NoSuchSchedule:
      description: No such schedule
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
                example: NotFoundError
              message:
                type: string
                example: No such schedule.
    NoTimezone:
      description: No timezone
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
                example: NotFoundError
              message:
                type: string
                example: No timezone for the given plant.
    NoPlant:
      description: No plant
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: Plant is required
    NoTenant:
      description: Bad Request
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: Tenant is required
    NoDashboard:
      description: Dashboard not found
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: Dashboard not found
    DashboardAlreadySeeded:
      description: Dashboard already seeded
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: Dashboard already seeded
    NoDefaultDashboard:
      description: Default dashboard not found
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: Default dashboard not found
    NoOperatorPanel:
      description: OperatorPanel not found
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: OperatorPanel not found
    OperatorPanelAlreadySeeded:
      description: OperatorPanel already seeded
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: OperatorPanel already seeded
    NoDefaultOperatorPanel:
      description: Default OperatorPanel not found
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: Default OperatorPanel not found
    NoReport:
      description: Report not found
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: Report not found
    ReportAlreadySeeded:
      description: Report already seeded
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: Report already seeded
    NoDefaultReport:
      description: Default Report not found
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: Default Report not found
    FailedToFetchDashboards:
      description: Failed to fetch dashboards
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: Failed to fetch dashboards
    FailedToFetchOperatorPanels:
      description: Failed to fetch operator panels
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: Failed to fetch operator panels
    FailedToFetchReports:
      description: Failed to fetch reports
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: Failed to fetch reports
    InvalidRequest:
      description: Invalid Request
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: Invalid Request
    FailedToGetTimeline:
      description: Failed to get timeline for the given plant
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: "Failed to get timeline for plant: plant_name"
    FailedToGetTimelineSchema:
      description: Failed to get timeline schema for the given plant
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: "Failed to get timeline schema"
    FailedToGetTimelineLatest:
      description: Failed to get latest timeline for the given plant
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: "Failed to get latest timeline documents for plant:"
    ErrorWithMessageInBody:
      description: Generic error message body
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string

    alertTag:
      description: Response from POSTing alert tag
      content:
        application/json:
          schema:
            type: object
            properties:
              enabled:
                type: boolean
                example: true
              value:
                type: string
                example: quality
              color:
                type: string
                example: white
              id:
                type: string
                example: tagid

    ErrorWithNameAndMessage:
      description: Bad response
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: object
                properties:
                  name:
                    type: string
                  message:
                    type: string
    ErrorWithErrorAndMessage:
      description: Error message
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
              message:
                type: string
    FlattenedMetricOutput:
      description: OK
      content:
        application/json:
          schema:
            type: array
            items:
              type: object
              properties:
                device:
                  type: string
                  example: device-1
                hour:
                  type: number
                  example: 10
                utilization:
                  type: number
                  example: 0.7875611111111112
    postDevice:
      description: OK
      content:
        application/json:
          schema:
            type: string
            example: "Successfully POSTed device"

  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer

